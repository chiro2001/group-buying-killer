{"version":3,"sources":["utils/utils.js","api/api.js","data/reducers.js","Config.js","data/store.js","data/action.js","components/listItemLink.js","pages/login.js","pages/loginDialog.js","components/reserveTable.js","components/reserveTables.js","pages/launch.js","pages/settings.js","pages/verify.js","components/timetableNodeList.js","components/timetableNode.js","components/timetablePeriodList.js","components/timetablePeriod.js","pages/timetableNodeAddDialog.js","pages/timetablePeriodAddDialog.js","pages/planTime.js","pages/planStock.js","pages/connect.js","App.js","reportWebVitals.js","index.js"],"names":["isMobileDevice","sUserAgent","navigator","userAgent","indexOf","urlEncode","param","key","encode","paramStr","t","encodeURIComponent","i","k","Array","parseTimePoint","time","moment","format","parseTimePeriod","duration","humanize","sleep","time_ms","Promise","accept","setTimeout","Date","prototype","setDay","day","day_","this","getDay","setTime","getTime","toDateString","toISOString","slice","API","props","url_base","url","test","get_ips","get_timetable_node","add_timetable_node","get_timetable_period","add_timetable_period","get_shop_info","get_reserve_date","get_reserve_table","logout","has_login","request","bind","router","args","a","method","js","fetch","credentials","mode","json","body","JSON","stringify","headers","code","console","warn","message","data","timetable_node","timetable_period","log","parse","e","ips","node","period","shop_info","reserve_date","date","reserve_table","defaultState","config","ITEM_NAME","load","save","theme_avaliable","createMuiTheme","dark","palette","type","primary","main","blueGrey","secondary","grey","data_default","debug","version_frontend","theme_name","theme","api","then","state","localStorage","getItem","Error","setItem","reserveTableData","roomStockData","timetableNodes","timetablePeriods","shopInfo","combineReducers","action","store","createStore","reducers","applyMiddleware","thunk","setTimetableNodes","dispatch","setTimetablePeriods","ListItemLink","icon","to","renderLink","React","useMemo","forwardRef","itemProps","ref","ListItem","button","component","ListItemIcon","ListItemText","Login","render","Container","size","Typography","variant","Button","onClick","setState","Component","useStyles","makeStyles","content","marginTop","marginBottom","LoginDialog","onClose","open","Dialog","DialogTitle","Divider","DialogContent","table","minWidth","foodDesc","overflow","whiteSpace","contentOverflow","maxWidth","MyTableCell","styles","padding","noBorder","borderBottom","TableCell","align","colSpan","style","Period","classes","roomList","maxRow","roomNameList","map","roomData","roomMapItemEntry","roomName","length","push","targetRowCenter","parseInt","rows","cells","key2","periodId","name","roomItem","price","itemId","Box","className","stock","Link","getState","href","TableRow","requestedDayData","ReserveTable","useState","dayData","setDayData","setRoomList","undefined","setReserveTableData","LinearProgress","tableHeaderCells","d","tableHeader","TableHead","roomCapacity","periodList","TableContainer","Paper","Table","stickyHeader","TableBody","TabPanel","children","value","index","other","role","hidden","id","aria-labelledby","root","overflowX","display","width","flexGrow","background","paper","formControl","margin","spacing","selectEmpty","ReserveTables","tabValue","setTableValue","showTable","setShowTable","fullShow","setFullShow","Tabs","onChange","val","indicatorColor","textColor","scrollButtons","aria-label","Tab","label","FormControl","InputLabel","Select","event","target","MenuItem","IconButton","float","window","innerWidth","fullWidth","fullScreen","edge","Launch","Settings","Verify","nested","paddingLeft","TimetableNodeList","time_","selectedDate","handleDateChange","available_start","selectAvailableStartDate","handleAvailableStrartDateChange","available_end","selectAvailableEndDate","handleAvailableEndDateChange","selectAvailableStartDateOn","setSelectAvailableStartDateOn","selectAvailableEndDateOn","setSelectAvailableEndDateOn","inputPrice","useRef","valuePrice","setValuePrice","List","disablePadding","ListItemSecondaryAction","TextField","DateTimePicker","n","_d","secondaryIcon","TimetableNode","setOpen","itemName","cycle","avaliable","Collapse","in","timeout","unmountOnExit","TimetablePeriodList","time_start","selectedStartDate","handleDateStartChange","time_end","selectedEndDate","handleDateEndChange","TimetablePeriod","TimetableNodeAddDialog","TimetablePeriodAddDialog","PlanTime","nodeAddOpen","setNodeAddOpen","periodAddOpen","setPeriodAddOpen","updateData","nodes","periods","subheader","ListSubheader","color","key_count","PlanStock","QRCode","require","Connect","qrcodeWidth","location","protocol","hostname","port","addEventListener","ip","drawerWidth","locale","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","leavingScreen","title","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","hide","flexShrink","drawerOpen","drawerClose","breakpoints","up","toolbar","alignItems","justifyContent","mixins","App","useTheme","popupLogin","setPopupLogin","useEffect","onWindowResize","removeEventListener","ThemeProvider","utils","MomentUtils","CssBaseline","AppBar","position","clsx","Toolbar","noWrap","Drawer","direction","pathname","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById","cycleFunc"],"mappings":"mrBAGO,SAASA,KACd,IAAMC,EAAaC,UAAUC,UAC7B,OAAQF,EAAWG,QAAQ,YAAc,GAAKH,EAAWG,QAAQ,WAAa,GAAKH,EAAWG,QAAQ,SAAW,GAAKH,EAAWG,QAAQ,SAAW,GAAKH,EAAWG,QAAQ,YAAc,EAUrL,SAASC,GAAUC,EAAOC,EAAKC,GACpC,GAAa,MAATF,EAAe,MAAO,GAC1B,IAAIG,EAAW,GACXC,SAAYJ,EAChB,GAAU,WAANI,GAAwB,WAANA,GAAwB,YAANA,EACtCD,GAAY,IAAMF,EAAM,KAAkB,MAAVC,GAAkBA,EAAUG,mBAAmBL,GAASA,QAExF,IAAK,IAAIM,KAAKN,EAAO,CACnB,IAAIO,EAAW,MAAPN,EAAcK,EAAIL,GAAOD,aAAiBQ,MAAQ,IAAMF,EAAI,IAAM,IAAMA,GAChFH,GAAYJ,GAAUC,EAAMM,GAAIC,EAAGL,GAGvC,OAAOC,EAYF,SAASM,GAAeC,GAC7B,OAAOC,MAASC,OAAO,OAAQF,GAG1B,SAASG,GAAgBH,GAC9B,OAAOC,IAAOG,SAASJ,GAAMK,WAOxB,SAASC,GAAMC,GACpB,OAAO,IAAIC,SAAQ,SAAAC,GACjBC,WAAWD,EAAQF,MAKvBI,KAAKC,UAAUC,OAAS,SAAUC,GAChC,IAAIC,EAAOC,KAAKC,SAChB,OAAIF,IAASD,GACbE,KAAKE,QAAQF,KAAKG,UAAY,OAAuBL,EAAMC,IADlCC,MAM3BL,KAAKC,UAAUQ,aAAe,WAC5B,OAAOJ,KAAKK,cAAcC,MAAM,EAAG,K,ICjE/BC,G,WACJ,WAAYC,GAAQ,qBAElBR,KAAKS,SAAW,WAIhBT,KAAKU,IAAM,CACTC,KAAM,OACNC,QAAS,UACTC,mBAAoB,qBACpBC,mBAAoB,qBACpBC,qBAAsB,uBACtBC,qBAAsB,uBACtBC,cAAe,gBACfC,iBAAkB,mBAClBC,kBAAmB,oBACnBC,OAAQ,SACRC,UAAW,aAEbrB,KAAKsB,QAAUtB,KAAKsB,QAAQC,KAAKvB,MACjCA,KAAKW,KAAOX,KAAKW,KAAKY,KAAKvB,MAC3BA,KAAKY,QAAUZ,KAAKY,QAAQW,KAAKvB,M,mFAEnC,WAAcwB,EAAQC,GAAtB,6BAAAC,EAAA,yDAA4BC,EAA5B,+BAAqC,MAC/BC,EAAK,GACM,QAAXD,EAFN,iCAGuBE,MAAM7B,KAAKS,SAAWe,GAAUC,EAAO,IAAM,IAAMpD,GAAUoD,GAAO,CACrFE,OAAQ,MACRG,YAAa,OAEbC,KAAM,SAPZ,8BAQQC,OARR,OAGIJ,EAHJ,gDAUsBC,MAAM7B,KAAKS,SAAWe,EAAQ,CAC9CS,KAAMC,KAAKC,UAAUV,GACrBE,OAAQ,OAGRG,YAAa,OACbC,KAAM,OACNK,QAAS,CACP,eAAgB,sBAlBxB,gCAoBQJ,OApBR,QAUIJ,EAVJ,eA4BE,GANgB,MAAZA,EAAGS,MACLC,QAAQC,KAAK,8BAA+BX,EAAGS,KAAM,WAAYT,EAAGY,QAAS,QAASZ,EAAGa,MAErFb,EAAGa,KAAKC,gBAAkBd,EAAGa,KAAKE,kBACtCL,QAAQM,IAAI,OAAQhB,GAEF,kBAARA,EACV,IACEA,EAAKM,KAAKW,MAAMjB,GAChB,MAAOkB,GACPR,QAAQC,KAAKO,GAhCnB,yBAmCSlB,GAnCT,iD,kHAqCA,sBAAAF,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIC,MADtC,uCAC6C8B,KAAK9B,MADlD,gD,iHAGA,sBAAAe,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIU,QADtC,uCAC+CiB,MAD/C,gD,oHAGA,sBAAAX,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIW,WADtC,uCACkDoB,KAAKpB,WADvD,gD,kHAGA,sBAAAK,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIE,SADtC,uCACgD6B,KAAKM,KADrD,gD,6HAGA,sBAAArB,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIG,oBADtC,uCAC2D4B,KAAKC,gBADhE,gD,6HAGA,WAAyBM,GAAzB,SAAAtB,EAAA,sEACe1B,KAAKsB,QAAQtB,KAAKU,IAAII,mBAAoBkC,EAAM,QAD/D,wF,gIAGA,sBAAAtB,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIK,sBADtC,uCAC6D0B,KAAKE,kBADlE,gD,+HAGA,WAA2BM,GAA3B,SAAAvB,EAAA,sEACe1B,KAAKsB,QAAQtB,KAAKU,IAAIM,qBAAsBiC,EAAQ,QADnE,wF,yHAGA,sBAAAvB,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIO,eADtC,uCACsDwB,KAAKS,WAD3D,gD,2HAGA,sBAAAxB,EAAA,sEACgB1B,KAAKsB,QAAQtB,KAAKU,IAAIQ,kBADtC,uCACyDuB,KAAKU,cAD9D,gD,4HAGA,WAAwBC,GAAxB,SAAA1B,EAAA,sEAEgB1B,KAAKsB,QAAQtB,KAAKU,IAAIS,kBAAmB,CAAEiC,KAAMA,IAFjE,uCAE0EX,KAAKY,eAF/E,gD,8DC1FIC,GAAe,CACnBC,OAAQ,I,WCER,aAAe,IAAD,iCADdC,UAAY,qBAEVxD,KAAKyD,KAAOzD,KAAKyD,KAAKlC,KAAKvB,MAC3BA,KAAK0D,KAAO1D,KAAK0D,KAAKnC,KAAKvB,MAC3BA,KAAK2D,gBAAkB,CACrB,QAAWC,aAAe,IAC1BC,KAAMD,aAAe,CACnBE,QAAS,CACPC,KAAM,OACNC,QAAS,CACPC,KAAMC,KAAS,MAEjBC,UAAW,CACTF,KAAMG,KAAK,UAMnBpE,KAAKqE,aAAe,CAClBC,OAAO,EACPC,iBAAkB,GAElBC,WAAY,OACZb,gBAAiB,CACf,UACA,SAGJ3D,KAAKyC,KAAOzC,KAAKqE,aACjBrE,KAAKyE,MAAQzE,KAAK2D,gBAAL,QACb3D,KAAK0E,IAAM,IAAInE,GAEfP,KAAKqB,WAAY,EACjBrB,KAAK0E,IAAIrD,YAAYsD,MAAK,SAAAC,GAAW,EAAKvD,UAAYuD,KACtD5E,KAAKyD,O,yCAGP,WACEnB,QAAQM,IAAI,6BACR5C,KAAKyC,KAAK6B,QACZhC,QAAQM,IAAI,gCACZ5C,KAAK0D,QAEP,IAEE,GADA1D,KAAKyC,KAAOP,KAAKW,MAAMgC,aAAaC,QAAQ9E,KAAKwD,aAC5CxD,KAAKyC,KAAM,MAAM,IAAIsC,MAAM,aAEhC,GADAzC,QAAQM,IAAI,YAAa5C,KAAKyC,OACzBzC,KAAKyC,KAAK8B,kBAAoBvE,KAAKyC,KAAK8B,iBAAmBvE,KAAKqE,aAAaE,iBAAkB,CAIlG,IAAK,IAAI1F,KAFTyD,QAAQM,IAAR,yBAA8B5C,KAAKyC,KAAK8B,iBAAxC,eAA+DvE,KAAKqE,aAAaE,mBACjFvE,KAAKyC,KAAK8B,iBAAmBvE,KAAKqE,aAAaE,iBACjCvE,KAAKqE,aACZrE,KAAKyC,KAAK5D,KACbyD,QAAQM,IAAR,gCAAqC/D,IACrCmB,KAAKyC,KAAK5D,GAAKmB,KAAKqE,aAAaxF,IAGrCmB,KAAK0D,QAEP,MAAOZ,GACPR,QAAQC,KAAR,uBAA6BvC,KAAKwD,UAAlC,0CACAxD,KAAKyC,KAAOzC,KAAKqE,aACjBrE,KAAK0D,OAEP1D,KAAKyE,MAAQzE,KAAK2D,gBAAgB3D,KAAKyC,KAAK+B,YACvCxE,KAAKyE,QAAOzE,KAAKyE,MAAQzE,KAAK2D,gBAAL,W,kBAGhC,WACErB,QAAQM,IAAI,4BACZiC,aAAaG,QAAQhF,KAAKwD,UAAWtB,KAAKC,UAAUnC,KAAKyC,W,MDvE3DwC,iBAAkB,GAClBC,cAAe,KACfC,eAAgB,GAChBC,iBAAkB,GAClBC,SAAU,MA0DGC,mBAAgB,CAAE/B,OAvDjC,WAAsD,IAAtCqB,EAAqC,uDAA7BtB,GAAaC,OAAQgC,EAAQ,uCACnD,OAAQA,EAAOxB,MACb,IAAK,aACH,OAAOwB,EAAO9C,KAChB,QACE,OAAOmC,IAkD4BK,iBA9CzC,WAA0E,IAAhDL,EAA+C,uDAAvCtB,GAAa2B,iBAAkBM,EAAQ,uCACvE,OAAQA,EAAOxB,MACb,IAAK,yBACH,OAAOwB,EAAO9C,KAChB,QACE,OAAOmC,IAyC8CM,cArC3D,WAAoE,IAA7CN,EAA4C,uDAApCtB,GAAa4B,cAAeK,EAAQ,uCACjE,OAAQA,EAAOxB,MACb,IAAK,sBACH,OAAOwB,EAAO9C,KAChB,QACE,OAAOmC,IAgC6DS,SA5B1E,WAAkE,IAAhDT,EAA+C,uDAAvCtB,GAAa2B,iBAAkBM,EAAQ,uCAC/D,OAAQA,EAAOxB,MACb,IAAK,gBACH,OAAOwB,EAAO9C,KAChB,QACE,OAAOmC,IAuBuEO,eAlBpF,WAAsE,IAA9CP,EAA6C,uDAArCtB,GAAa6B,eAAgBI,EAAQ,uCACnE,OAAQA,EAAOxB,MACb,IAAK,sBACH,OAAOwB,EAAO9C,KAChB,QACE,OAAOmC,IAauFQ,iBATpG,WAAwE,IAA9CR,EAA6C,uDAArCtB,GAAa6B,eAAgBI,EAAQ,uCACrE,OAAQA,EAAOxB,MACb,IAAK,wBACH,OAAOwB,EAAO9C,KAChB,QACE,OAAOmC,ME9CEY,GAJHC,YACRC,GACAC,YAAgBC,MCSb,SAASC,GAAkBpD,GAChC,OAAO,SAAAqD,GACLA,EAAS,CAAE/B,KAAM,sBAAuBtB,KAAMA,KAI3C,SAASsD,GAAoBtD,GAClC,OAAO,SAAAqD,GACLA,EAAS,CAAE/B,KAAM,wBAAyBtB,KAAMA,K,0CCHrCuD,OAxBf,SAAsBxF,GAAQ,IACpByF,EAAsBzF,EAAtByF,KAAMjC,EAAgBxD,EAAhBwD,QAASkC,EAAO1F,EAAP0F,GAEjBC,EAAaC,IAAMC,SACvB,kBAAMD,IAAME,YAAW,SAACC,EAAWC,GAAZ,OAAoB,eAAC,IAAD,aAAYN,GAAIA,EAAIM,IAAKA,GAASD,SAC7E,CAACL,IAGH,OACE,8BACE,gBAACO,GAAA,EAAD,CAAUC,QAAM,EAACC,UAAWR,EAA5B,UACGF,EAAO,eAACW,GAAA,EAAD,UAAeX,IAAuB,KAC9C,eAACY,GAAA,EAAD,CAAc7C,QAASA,U,6ECWhB8C,G,oDApBb,WAAYtG,GAAQ,IAAD,+BACjB,cAAMA,IACDuG,OAAS,EAAKA,OAAOxF,KAAZ,iBACd,EAAKqD,MAAQ,CACXvD,WAAW,GAEb,EAAKqD,IAAM,IAAInE,GANE,E,2CAQnB,WAAU,IAAD,OACUP,KAAKQ,MAAhB+C,OACN,OAAQ,gBAACyD,GAAA,EAAD,CAAWC,KAAK,KAAhB,UACN,eAACC,EAAA,EAAD,CAAYC,QAAQ,QAApB,SAA6BnH,KAAK4E,MAAMvD,UAAY,6IAA4B,yFAChF,eAAC+F,GAAA,EAAD,CAAQD,QAAQ,YAAYE,QAAS,WACnC,EAAK3C,IAAItD,SACT,EAAKkG,SAAS,CAAEjG,WAAW,KAF7B,6C,GAbc+E,IAAMmB,WCKpBC,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvCiD,QAAS,CACPC,UAAW,MACXC,aAAc,WAgCHC,OA5Bf,SAAqBrH,GACHgH,KAAhB,IACQM,EAAkBtH,EAAlBsH,QAASC,EAASvH,EAATuH,KAOTxE,EAAW/C,EAAX+C,OAER,OACE,gBAACyE,GAAA,EAAD,CAAQF,QARU,WACdA,GACFA,KAM4BC,KAAMA,EAApC,UACE,eAACE,GAAA,EAAD,uCACA,eAACC,EAAA,EAAD,IACA,eAACC,GAAA,EAAD,UACE,eAAC,GAAD,CAAO5E,OAAQA,U,8NCpBjBiE,GAAYC,YAAW,CAC3BW,MAAO,CACLC,SAAU,MAEZC,SAAU,CACRC,SAAU,SACVC,WAAY,SACZC,gBAAiB,WACjBC,SAAU,OAGd,SAASC,GAAYnI,GACnB,IAAIoI,EAAS,CAAEC,QAAS,GAGxB,OADIrI,EAAMsI,WAAUF,EAAOG,aAAe,KACnC,eAACC,GAAA,EAAD,CAAWC,MAAOzI,EAAMyI,MAAOC,QAAS1I,EAAM0I,QAASC,MAAOP,EAA9D,SAAuEpI,EAAMkH,UAGtF,IAAMhD,GAAM,IAAInE,GAOhB,SAAS6I,GAAO5I,GACd,IAAM6I,EAAU7B,KACR/E,EAAmBjC,EAAnBiC,KAAM6G,EAAa9I,EAAb8I,SAGVC,EAAS,EACTC,EAAe,GACnBF,EAASG,KAAI,SAACC,EAAU9K,GACtB2K,EAASA,EAAS9G,EAAKkH,iBAAiBD,EAASE,UAAUC,OAASN,EAAS9G,EAAKkH,iBAAiBD,EAASE,UAAUC,OACtHL,EAAaM,KAAKJ,EAASE,aAG7B,IAAIG,EAAkBC,SAAST,EAAS,GACpCQ,EAAkB,IAAGA,EAAkB,GAG3C,IADA,IAAIE,EAAO,GACFrL,EAAI,EAAGA,EAAI2K,EAAQ3K,IAAK,CAC/B,IAD+B,EAC3BsL,EAAQ,CAAC,eAACvB,GAAD,CAAwBwB,KAAK,OAAOlB,MAAM,SAASC,QAAS,EAAGxB,QAASqC,IAAoBnL,EAAI6D,EAAK2H,SAAW,KAAMtB,SAAUS,EAAS,IAAM3K,GAA9H,SADC,eAEd4K,GAFc,yBAEtBa,EAFsB,QAI7B,IAAM5H,EAAKkH,iBAAiBU,GAAMzL,GAGhC,OADAsL,EAAMJ,KAAK,eAACnB,GAAD,CAAkDO,QAAS,GAAzCzG,EAAK2H,SAAWC,EAAOzL,EAAI,MACxD,WAEF,IAAI0L,EAAW7H,EAAKkH,iBAAiBU,GAAMzL,GAE3CsL,EAAMJ,KAAK,eAACnB,GAAD,CAAwEM,MAAM,SAASC,QAAS,EAAGxB,QAAS,SAAM4C,EAASC,OAAzG9H,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,UAE1EsL,EAAMJ,KAAK,eAACnB,GAAD,CAAuEM,MAAM,SAASC,QAAS,EAAGxB,QAAS,eAAC+C,GAAA,EAAD,CAAK9D,UAAU,MAAM+D,UAAWrB,EAAQf,SAAxC,SACnHgC,EAAShC,YADiB7F,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,SAG1EsL,EAAMJ,KAAK,eAACnB,GAAD,CAAwEM,MAAM,SAASC,QAAS,EAAGxB,QAAS9I,IAAMmL,EAAmBO,EAASK,MAAQ,SAAO,GAAI7B,SAAUS,EAAS,IAAM3K,GAAxK6D,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,UAE1EsL,EAAMJ,KAAK,eAACnB,GAAD,CAAuEM,MAAM,SAASC,QAAS,EAAGxB,QAC3G,eAACkD,GAAA,EAAD,CAAoEvD,QAAS,WAC3E/E,QAAQM,IAAI,WAAY0H,GADyD,MAGpC9E,GAAMqF,WAH8B,EAGzE1F,eAHyE,EAGzDC,kBAEvB0F,KAAK,KALR,yBAAWrI,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,aAD7B6D,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,SAS1EsL,EAAMJ,KAAK,eAACnB,GAAD,CAAsEM,MAAM,SAASC,QAAS,EAAGxB,QAC1G,eAACkD,GAAA,EAAD,CAAoEvD,QAAS,WAC3E/E,QAAQM,IAAI,WAAY0H,IACvBQ,KAAK,KAFR,yBAAWrI,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,aAD7B6D,EAAK2H,SAAWC,EAAOC,EAASE,OAAS5L,EAAI,SAzB5E,2BAA+B,IAFA,8BAkC/BqL,EAAKH,KAAK,eAACiB,GAAA,EAAD,UAAmCb,GAApBzH,EAAK2H,SAAWxL,IAE3C,OAAOqL,EAGT,IAAIe,GAAmB,KAiFRC,OA/Ef,SAAsBzK,GACpB,IAAM6I,EAAU7B,KACR1H,EAAsBU,EAAtBV,IAAa2C,GAASjC,EAAjB+C,OAAiB/C,EAATiC,MACfW,GAAO,IAAIzD,MAAOE,OAAOC,GAAKM,eAHT,EAIGgG,IAAM8E,SAASzI,GAAc+C,GAAMqF,WAAW5F,iBAAiB7B,IAJlE,mBAIpB+H,EAJoB,KAIXC,EAJW,OAKKhF,IAAM8E,SAAS1F,GAAMqF,WAAW5F,iBAAiB7B,GAAQoC,GAAMqF,WAAW5F,iBAAiB7B,GAAMkG,SAAW,IALjH,mBAKpBA,EALoB,KAKV+B,EALU,KAW3B,GALAL,GAA+E,OAA5D9I,KAAKC,UAAUqD,GAAMqF,WAAW5F,iBAAiB7B,UAA+EkI,IAA5DpJ,KAAKC,UAAUqD,GAAMqF,WAAW5F,iBAAiB7B,IAExId,QAAQM,IAAI,OAAQQ,IAGf+H,EAAS,CAEZ,GAAKH,GAWE,CACL,IAAI/F,EAAmBO,GAAMqF,WAAW5F,iBAAiB7B,GAErD6B,IACFmG,EAAWnG,GACXoG,EAAYpG,EAAiBqE,gBAf/B0B,IAAmB,EACnBtG,GAAIvD,kBAAkBiC,GAAMuB,MAAK,SAAAM,GAE/B,IAAIvG,EAAI8G,GAAMqF,WAAW5F,iBACzBvG,EAAE0E,GAAQ6B,EACVO,GAAMM,SJ9GP,SAA6BrD,GAClC,OAAO,SAAAqD,GACLA,EAAS,CAAE/B,KAAM,yBAA0BtB,KAAMA,KI4G9B8I,CAAoB7M,IACnC0M,EAAWnG,GACXoG,EAAYpG,EAAiBqE,UAC7B0B,IAAmB,KAYvB,OAAQ,eAAChE,GAAA,EAAD,UACN,eAACwE,GAAA,EAAD,MAGJ,IAAIC,EAAmB,CAAC,eAACzC,GAAA,EAAD,CAAsBC,MAAM,SAASC,QAAS,EAA9C,yBAAe,SACvCI,EAASG,KAAI,SAACiC,EAAG9M,GACf6M,EAAiB3B,KAAK,eAACd,GAAA,EAAD,CAA6BC,MAAM,SAASC,QAAS,EAArD,qCAAgB,IAAMwC,EAAI9M,IAChD6M,EAAiB3B,KAAK,eAACd,GAAA,EAAD,CAA6BC,MAAM,SAASC,QAAS,EAArD,yBAAgB,IAAMwC,EAAI9M,IAChD6M,EAAiB3B,KAAK,eAACd,GAAA,EAAD,CAA6BC,MAAM,SAASC,QAAS,EAArD,yBAAgB,IAAMwC,EAAI9M,IAChD6M,EAAiB3B,KAAK,eAACd,GAAA,EAAD,CAA6BC,MAAM,SAASC,QAAS,EAArD,qCAAgB,IAAMwC,EAAI9M,OAElD,IAAM+M,EAAc,gBAACC,GAAA,EAAD,WAClB,gBAACb,GAAA,EAAD,WACE,gBAAC/B,GAAA,EAAD,CAAWC,MAAM,SAASC,QAAS,EAAnC,cAAwC,SAAM,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,UAAKpJ,GAAlF,OACCwJ,EAASG,KAAI,SAACiC,EAAG9M,GAAJ,OACZ,gBAACoK,GAAA,EAAD,CAAWC,MAAM,SAAiBC,QAAS,EAA3C,UAA+CwC,EAAE9B,SAAjD,IAA4D8B,EAAEG,aAA9D,MAA+BjN,SAGnC,eAACmM,GAAA,EAAD,UACGU,OAGL,OAAKN,GAAYA,EAAQW,WAQvB,eAAC9E,GAAA,EAAD,UACE,eAAC+E,GAAA,EAAD,CAAgBpF,UAAWqF,KAA3B,SACE,gBAACC,GAAA,EAAD,CAAOC,cAAY,EAACxB,UAAWrB,EAAQjB,MAAvC,UACGuD,EACD,eAACQ,GAAA,EAAD,UACGhB,EAAQW,WAAWrC,KAAI,SAACiC,EAAG9M,GAAJ,OACtB,eAACwK,GAAD,CAA2B3G,KAAMiJ,EAAGpC,SAAUA,GAAjC,SAAW1K,eAZ1B,gBAACoI,GAAA,EAAD,WACN,4BACA,eAACwE,GAAA,EAAD,QCvIN,SAASY,GAAS5L,GAAQ,IAChB6L,EAAqC7L,EAArC6L,SAAUC,EAA2B9L,EAA3B8L,MAAOC,EAAoB/L,EAApB+L,MAAUC,EADZ,aACsBhM,EADtB,8BAGvB,OACE,8CACEiM,KAAK,WACLC,OAAQJ,IAAUC,EAClBI,GAAE,mCAA8BJ,GAChCK,kBAAA,8BAAwCL,IACpCC,GALN,aAOGF,IAAUC,GACT,eAAC9B,GAAA,EAAD,UAEG4B,OAaX,IAAM7E,GAAYC,aAAW,SAAChD,GAAD,YAAY,CACvCoI,MAAI,GACFC,UAAW,OACXC,QAAS,QACTC,MAAO,OACPC,SAAU,GAJR,sBAKK,QALL,gCAMexI,EAAMX,QAAQoJ,WAAWC,OANxC,GAQJC,YAAa,CACXC,OAAQ5I,EAAM6I,QAAQ,GACtBjF,SAAU,KAEZkF,YAAa,CACX5F,UAAWlD,EAAM6I,QAAQ,QAWd,SAASE,GAAchN,GAAQ,IACpC+C,EAAW/C,EAAX+C,OACF8F,EAAU7B,KAF2B,EAGTpB,IAAM8E,UAAS,IAAIvL,MAAOM,UAHjB,mBAGpCwN,EAHoC,KAG1BC,EAH0B,OAITtH,IAAM8E,UAAS,GAJN,mBAIpCyC,EAJoC,KAIzBC,EAJyB,OAKXxH,IAAM8E,UAAS,GALJ,mBAKpC2C,EALoC,KAK1BC,EAL0B,KASrC1F,EAAQ,uBAAKsC,UAAWrB,EAAQwD,KAAxB,UACZ,eAACkB,GAAA,EAAD,CACEzB,MAAOmB,EACPO,SAAU,SAAClL,EAAGmL,GAAJ,OAAYP,EAAcO,IACpCC,eAAe,UACfC,UAAU,UACVhH,QAAQ,aACRiH,cAAc,OACdC,aAAW,+BAPb,SASG,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,UAAK5E,KAAI,SAACiC,EAAG9M,GAC3C,OAAQ,eAAC0P,GAAA,EAAD,aAAKC,MAAO,SAAM7C,GA1BzB,CACLiB,GAAG,uBAAD,OAFaJ,EA2BwC3N,GAxBvD,gBAAgB,4BAAhB,OAA6C2N,KAwBP3N,GA3B1C,IAAmB2N,OA8Bd,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAG9C,KAAI,SAACiC,EAAG9M,GAAJ,OAAU,eAACwN,GAAD,CAAkBE,MAAOmB,EAAUlB,MAAOb,EAA1C,SACnC,eAAC,GAAD,CAAc5L,IAAK2N,EAAUlK,OAAQA,KADa3E,SAItD,OAEE,eADA,CACA,iBACE,gBAAC4P,GAAA,EAAD,CAAa9D,UAAWrB,EAAQ+D,YAAhC,UACE,eAACqB,GAAA,EAAD,uCACA,eAACC,GAAA,EAAD,CACEpC,MAAOmB,EACPO,SA5Ba,SAACW,GACpBjB,EAAciB,EAAMC,OAAOtC,QAyBvB,SAIG,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,UAAK7C,KAAI,SAACiC,EAAG9M,GAAJ,OAAU,eAACiQ,GAAA,EAAD,CAAkBvC,MAAO1N,EAAzB,SAA6B,SAAM8M,GAApB9M,WAGtE,eAACkQ,EAAA,EAAD,CAAY3F,MAAO,CAAE4F,MAAO,SAAW5H,QAAQ,YAAYE,QAAS,WAClEuG,GAAa,GACbE,GAAY,IAFd,SAGG,eAAC,KAAD,MACDkB,OAAOC,YAAc,IAAM7G,EAAQ,gBAAChB,GAAA,EAAD,CAAQ8H,WAAS,EAAC/H,QAAQ,YAAYE,QAAS,WAAQuG,GAAcD,IAArE,yBAAuFA,EAAY,eAAO,eAA1G,kBACrC,gBAAC3F,GAAA,EAAD,CAAQmH,WAAYtB,EAAU/F,QAAS,WAAQ8F,GAAa,IAAW7F,KAAM4F,EAA7E,UACE,gBAAC1F,GAAA,EAAD,WACE,gBAACwC,GAAA,EAAD,CAAK9D,UAAU,OAAf,mBAAwB,CAAC,SAAK,SAAK,SAAK,SAAK,SAAK,SAAK,UAAK8G,GAA5D,KAAwE,IAAI9N,MAAOE,OAAO4N,GAAUrN,eAApG,mBACCyN,EAAW,eAACiB,EAAA,EAAD,CAAYM,KAAK,MAAMjG,MAAO,CAAE4F,MAAO,SAAW1H,QAAS,WAAQyG,GAAY,IAA/E,SAA0F,eAAC,KAAD,MAAsC,eAACgB,EAAA,EAAD,CAAY3F,MAAO,CAAE4F,MAAO,SAAW5H,QAAQ,YAAYE,QAAS,WAC9MuG,GAAa,GACbE,GAAY,IAF8H,SAGzI,eAAC,KAAD,SACJ1F,QC3FMiH,OA5Bf,WAAmB,IAAD,EACqC7J,GAAMqF,WAAnD1F,EADQ,EACRA,eAAgBC,EADR,EACQA,iBAAkB7B,EAD1B,EAC0BA,OAC1C,OAAQ,gBAACyD,GAAA,EAAD,CAAWmC,MAAO,CAAE2D,UAAW,OAAQE,MAAO,QAA9C,UACN,eAAC9F,EAAA,EAAD,CAAYC,QAAQ,KAApB,sCACA,eAAC8E,GAAA,EAAD,UACE,gBAACE,GAAA,EAAD,WACE,gBAACpB,GAAA,EAAD,WACE,eAAC/B,GAAA,EAAD,CAAWC,MAAM,SAAjB,4CACA,eAACD,GAAA,EAAD,CAAWC,MAAM,SAAjB,wDACA,eAACD,GAAA,EAAD,CAAWC,MAAM,SAAjB,wDACA,eAACD,GAAA,EAAD,CAAWC,MAAM,SAAjB,2DAEF,gBAAC8B,GAAA,EAAD,WACE,gBAAC/B,GAAA,EAAD,CAAWC,MAAM,SAAjB,UAA2B,EAA3B,YACA,gBAACD,GAAA,EAAD,CAAWC,MAAM,SAAjB,UAA2B9D,EAAe0E,OAA1C,wBACA,gBAACb,GAAA,EAAD,CAAWC,MAAM,SAAjB,UAA2B7D,EAAiByE,OAA5C,wBACA,gBAACb,GAAA,EAAD,CAAWC,MAAM,SAAjB,UAA2B,EAA3B,gCAKN,wBACA,eAAC/B,EAAA,EAAD,CAAYC,QAAQ,KAApB,sCAEA,eAACqG,GAAD,CAAejK,OAAQA,QCdZ+L,G,oDAZb,WAAY9O,GAAQ,IAAD,+BACjB,cAAMA,IACDuG,OAAS,EAAKA,OAAOxF,KAAZ,iBAFG,E,2CAInB,WACmBvB,KAAKQ,MAAhB+C,OACN,OAAQ,eAACyD,GAAA,EAAD,CAAWC,KAAK,KAAhB,8B,GAPWb,IAAMmB,WCadgI,G,oDAZb,WAAY/O,GAAQ,IAAD,+BACjB,cAAMA,IACDuG,OAAS,EAAKA,OAAOxF,KAAZ,iBAFG,E,2CAInB,WACmBvB,KAAKQ,MAAhB+C,OACN,OAAQ,eAACyD,GAAA,EAAD,CAAWC,KAAK,KAAhB,0C,GAPSb,IAAMmB,W,kICSrBC,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvC+K,OAAQ,CACNC,YAAahL,EAAM6I,QAAQ,QAoFhBoC,OAhFf,SAA2BlP,GACzB,IAAM6I,EAAU7B,KACRxE,EAAkBxC,EAAlBwC,KAAM8E,EAAYtH,EAAZsH,QAFkB,EAGS1B,IAAM8E,SAASlI,EAAK2M,MAAQ3M,EAAK2M,MAAQ,IAAIhQ,MAHtD,mBAGzBiQ,EAHyB,KAGXC,EAHW,OAIoCzJ,IAAM8E,SAASlI,EAAK8M,gBAAkB9M,EAAK8M,gBAAkB,GAJjG,mBAIzBC,EAJyB,KAICC,EAJD,OAK+B5J,IAAM8E,SAASlI,EAAKiN,cAAgBjN,EAAKiN,cAAgB,GALxF,mBAKzBC,EALyB,KAKDC,EALC,OAMoC/J,IAAM8E,SAAsC,IAA7B6E,GANnD,mBAMzBK,EANyB,KAMGC,EANH,OAOgCjK,IAAM8E,SAAoC,IAA3BgF,GAP/C,mBAOzBI,EAPyB,KAOCC,EAPD,KAQ1BC,EAAapK,IAAMqK,SARO,EASIrK,IAAM8E,SAASlI,EAAKuH,OATxB,mBASzBmG,EATyB,KASbC,EATa,KAUhC,OACE,gBAACC,EAAA,EAAD,CAAMjK,UAAU,MAAMkK,gBAAc,EAACnG,UAAWrB,EAAQmG,OAAxD,UACE,gBAAC/I,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,uBACtB,eAAC8M,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAWxC,MAAM,2BAAO/H,IAAKgK,EAAYxC,SAAU,SAAClL,GAElDR,QAAQM,IAAIE,EAAE8L,OAAOtC,OACrBqE,EAAc7N,EAAE8L,OAAOtC,eAI7B,gBAAC7F,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,6BACtB,eAAC8M,GAAA,EAAD,UACE,eAACE,GAAA,EAAD,CAAgB1E,MAAOsD,EAAc5B,SAAU6B,SAGnD,gBAACpJ,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,qDACtB,eAAC8M,GAAA,EAAD,UACIV,EAEE,eAACY,GAAA,EAAD,CACA1E,MAAOyD,EACP/B,SAAUgC,EACVlI,QAAO,sBAAE,sBAAApG,EAAA,sEACDpC,GAAM,KADL,OAE0B+Q,EAAJ,IAA7BN,GAFO,6CAJX,eAAC3I,GAAA,EAAD,CAAQC,QAAS,WAAQgJ,GAA8B,IAAvD,2CAUN,gBAAC5J,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,qDACtB,eAAC8M,GAAA,EAAD,UACIR,EAEE,eAACU,GAAA,EAAD,CACA1E,MAAO4D,EACPlC,SAAUmC,EACVrI,QAAO,sBAAE,sBAAApG,EAAA,sEACDpC,GAAM,KADL,OAEwBiR,EAAJ,IAA3BL,GAFO,6CAJX,eAAC9I,GAAA,EAAD,CAAQC,QAAS,WAAQkJ,GAA4B,IAArD,2CAUN,eAAC9J,GAAA,EAAD,UACE,eAACW,GAAA,EAAD,CAAQD,QAAQ,YAAY+H,WAAS,EAAC7H,QAAS,WAC7C,IAAI4J,EAAIjO,EACH4M,EAAasB,GAGhBD,EAAEtB,MAAQC,EAAasB,GAAG/Q,UAF1B8Q,EAAEtB,MAAQC,EAAazP,UAGzB8Q,EAAEnB,gBAAkBC,EACpBkB,EAAEhB,cAAgBC,EAClBe,EAAE1G,MAAQmG,EACN5I,GACFA,EAAQmJ,IAVZ,gCC9DFzJ,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvC+K,OAAQ,CACNC,YAAahL,EAAM6I,QAAQ,IAE7B6D,cAAe,OA6CFC,OAxCf,SAAuB5Q,GACrB,IAAM6I,EAAU7B,KACRxE,EAAkBxC,EAAlBwC,KAAM8E,EAAYtH,EAAZsH,QAFc,EAGJ1B,IAAM8E,UAAS,GAHX,mBAGrBnD,EAHqB,KAGfsJ,EAHe,KAU5B,OACE,iCACE,gBAAC5K,GAAA,EAAD,CAAUC,QAAM,EAACW,QARD,WAClBgK,GAAStJ,IAOP,UACE,eAACnB,GAAA,EAAD,UAAc,eAAC,KAAD,MACd,eAACC,GAAA,EAAD,CAAc7C,QAAShB,EAAKsO,SAAUnN,UANpC,GAAN,OAAUnB,EAAKoH,SAAf,+BAA+BpH,EAAKuH,MAApC,qCAAkDxL,GAAeiE,EAAK2M,OAAtE,yBAAmF3M,EAAKuO,MAAQ,EAAIpS,GAAgB6D,EAAKuO,OAAS,eAAlI,YAA0IvO,EAAKwO,UAAY,eAAO,wBAO9J,sBAAK9G,UAAWrB,EAAQ8H,cAAxB,SACGpJ,EAAO,eAAC,KAAD,IAAqB,eAAC,KAAD,MAE/B,eAAC+I,GAAA,EAAD,UACE,eAAChC,EAAA,EAAD,CAAYM,KAAK,MAAjB,SACE,eAAC,KAAD,WAIN,eAACqC,GAAA,EAAD,CAAUC,GAAI3J,EAAM4J,QAAQ,OAAOC,eAAa,EAAhD,SACE,eAAC,GAAD,CAAmB5O,KAAMA,EAAM8E,QAAS,SAAA9E,GACtCV,QAAQM,IAAI,UAAWI,EAAM8E,GAC7BuJ,GAAQ,GACJvJ,GAASA,aCtCjBN,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvC+K,OAAQ,CACNC,YAAahL,EAAM6I,QAAQ,QAsFhBuE,OAlFf,SAA6BrR,GAC3B,IAAM6I,EAAU7B,KACRvE,EAAoBzC,EAApByC,OAAQ6E,EAAYtH,EAAZsH,QAFkB,EAGiB1B,IAAM8E,SAASjI,EAAO6O,WAAa7O,EAAO6O,WAAa,IAAInS,MAH5E,mBAG3BoS,EAH2B,KAGRC,EAHQ,OAIa5L,IAAM8E,SAASjI,EAAOgP,SAAWhP,EAAOgP,SAAW,IAAItS,MAJpE,mBAI3BuS,EAJ2B,KAIVC,EAJU,OAKkC/L,IAAM8E,SAASjI,EAAO6M,gBAAkB7M,EAAO6M,gBAAkB,GALnG,mBAK3BC,EAL2B,KAKDC,EALC,OAM6B5J,IAAM8E,SAASjI,EAAOgN,cAAgBhN,EAAOgN,cAAgB,GAN1F,mBAM3BC,EAN2B,KAMHC,EANG,OAOkC/J,IAAM8E,SAAsC,IAA7B6E,GAPjD,mBAO3BK,EAP2B,KAOCC,EAPD,OAQ8BjK,IAAM8E,SAAoC,IAA3BgF,GAR7C,mBAQ3BI,EAR2B,KAQDC,EARC,KAS5BC,EAAapK,IAAMqK,SATS,EAUErK,IAAM8E,SAASjI,EAAOsH,OAVxB,mBAU3BmG,EAV2B,KAUfC,EAVe,KAWlC,OACE,gBAACC,EAAA,EAAD,CAAMjK,UAAU,MAAMkK,gBAAc,EAACnG,UAAWrB,EAAQmG,OAAxD,UACE,gBAAC/I,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,uBACtB,eAAC8M,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CAAWxC,MAAM,2BAAO/H,IAAKgK,EAAYxC,SAAU,SAAClL,GAElDR,QAAQM,IAAIE,EAAE8L,OAAOtC,OACrBqE,EAAc7N,EAAE8L,OAAOtC,eAI7B,gBAAC7F,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,qDACtB,eAAC8M,GAAA,EAAD,UACE,eAACE,GAAA,EAAD,CAAgB1E,MAAOyF,EAAmB/D,SAAUgE,SAGxD,gBAACvL,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,qDACtB,eAAC8M,GAAA,EAAD,UACE,eAACE,GAAA,EAAD,CAAgB1E,MAAO4F,EAAiBlE,SAAUmE,SAGtD,gBAAC1L,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,qDACtB,eAAC8M,GAAA,EAAD,UACIV,EAEE,eAACY,GAAA,EAAD,CACA1E,MAAOyD,EACP/B,SAAUgC,EACVlI,QAAO,sBAAE,sBAAApG,EAAA,sEACDpC,GAAM,KADL,OAE0B+Q,EAAJ,IAA7BN,GAFO,6CAJX,eAAC3I,GAAA,EAAD,CAAQC,QAAS,WAAQgJ,GAA8B,IAAvD,2CAUN,gBAAC5J,GAAA,EAAD,WACE,eAACI,GAAA,EAAD,CAAc7C,QAAQ,qDACtB,eAAC8M,GAAA,EAAD,UACIR,EAEE,eAACU,GAAA,EAAD,CACA1E,MAAO4D,EACPlC,SAAUmC,EACVrI,QAAO,sBAAE,sBAAApG,EAAA,sEACDpC,GAAM,KADL,OAEwBiR,EAAJ,IAA3BL,GAFO,6CAJX,eAAC9I,GAAA,EAAD,CAAQC,QAAS,WAAQkJ,GAA4B,IAArD,2CAUN,eAAC9J,GAAA,EAAD,UACE,eAACW,GAAA,EAAD,CAAQD,QAAQ,YAAY+H,WAAS,EAAC7H,QAAS,WAC7C,IAAI4J,EAAIhO,EACRgO,EAAEtB,MAAQe,EACVpO,QAAQM,IAAI,UAAWkF,GACnBA,GACFA,EAAQmJ,IALZ,gCCtEFzJ,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvC+K,OAAQ,CACNC,YAAahL,EAAM6I,QAAQ,IAE7B6D,cAAe,OA6CFiB,OAxCf,SAAyB5R,GACvB,IAAM6I,EAAU7B,KACRvE,EAAoBzC,EAApByC,OAAQ6E,EAAYtH,EAAZsH,QAFc,EAGN1B,IAAM8E,UAAS,GAHT,mBAGvBnD,EAHuB,KAGjBsJ,EAHiB,KAU9B,OACE,iCACE,gBAAC5K,GAAA,EAAD,CAAUC,QAAM,EAACW,QARD,WAClBgK,GAAStJ,IAOP,UACE,eAACnB,GAAA,EAAD,UAAc,eAAC,KAAD,MACd,eAACC,GAAA,EAAD,CAAc7C,QAASf,EAAOqO,SAAUnN,UANtC,GAAN,OAAUlB,EAAOmH,SAAjB,+BAAiCnH,EAAOsH,MAAxC,qCAAsDxL,GAAekE,EAAO6O,YAA5E,iDAAkG/S,GAAekE,EAAOgP,UAAxH,yBAAwIhP,EAAOsO,MAAQ,EAAIpS,GAAgB8D,EAAOsO,OAAS,eAA3L,YAAmMtO,EAAOuO,UAAY,eAAO,wBAOzN,sBAAK9G,UAAWrB,EAAQ8H,cAAxB,SACGpJ,EAAO,eAAC,KAAD,IAAqB,eAAC,KAAD,MAE/B,eAAC+I,GAAA,EAAD,UACE,eAAChC,EAAA,EAAD,CAAYM,KAAK,MAAjB,SACE,eAAC,KAAD,WAIN,eAACqC,GAAA,EAAD,CAAUC,GAAI3J,EAAM4J,QAAQ,OAAOC,eAAa,EAAhD,SACE,eAAC,GAAD,CAAqB3O,OAAQA,EAAQ6E,QAAS,SAAA7E,GAC5CX,QAAQM,IAAI,UAAWK,GACnB6E,GAASA,IACbuJ,GAAQ,YCrCZ7J,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvCiD,QAAS,CACPC,UAAW,MACXC,aAAc,WAiCHyK,OA7Bf,SAAgC7R,GACdgH,KAAhB,IACQM,EAA0BtH,EAA1BsH,QAASC,EAAiBvH,EAAjBuH,KAAMxE,EAAW/C,EAAX+C,OAOvB,OACE,gBAACyE,GAAA,EAAD,CAAQF,QANU,WACdA,GACFA,KAI4BC,KAAMA,EAAMmH,WAAS,EAAnD,UACE,eAACjH,GAAA,EAAD,yDACA,eAACC,EAAA,EAAD,IACA,eAACC,GAAA,EAAD,UACE,eAAC,GAAD,CAAmB5E,OAAQA,EAAQuE,QAAS,SAAAmJ,GAC1C3O,QAAQM,IAAIqO,GACZnJ,KACC9E,KAAM,WCxBXwE,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvCiD,QAAS,CACPC,UAAW,MACXC,aAAc,WAiCH0K,OA7Bf,SAAkC9R,GAChBgH,KAAhB,IACQM,EAA0BtH,EAA1BsH,QAASC,EAAiBvH,EAAjBuH,KAAMxE,EAAW/C,EAAX+C,OAOvB,OACE,gBAACyE,GAAA,EAAD,CAAQF,QANU,WACdA,GACFA,KAI4BC,KAAMA,EAAMmH,WAAS,EAAnD,UACE,eAACjH,GAAA,EAAD,yDACA,eAACC,EAAA,EAAD,IACA,eAACC,GAAA,EAAD,UACE,eAAC,GAAD,CAAqB5E,OAAQA,EAAQuE,QAAS,SAAAmJ,GAC5C3O,QAAQM,IAAIqO,GACZnJ,KACC7E,OAAQ,WCYJsP,OArCf,SAAkB/R,GAAQ,IAAD,EACe4F,IAAM8E,UAAS,GAD9B,mBAChBsH,EADgB,KACHC,EADG,OAEmBrM,IAAM8E,UAAS,GAFlC,mBAEhBwH,EAFgB,KAEDC,EAFC,OAG8BnN,GAAMqF,WAAnD1F,EAHe,EAGfA,eAAgBC,EAHD,EAGCA,iBAAkB7B,EAHnB,EAGmBA,OAHnB,SAIRqP,IAJQ,2EAIvB,4BAAAlR,EAAA,6DACQgD,EAAM,IAAInE,GADlB,SAEQmE,EAAI7D,qBAAqB8D,MAAK,SAAAkO,GAAWrN,GAAMM,SAASD,GAAkBgN,OAFlF,uBAGQnO,EAAI3D,uBAAuB4D,MAAK,SAAAmO,GAAatN,GAAMM,SAASC,GAAoB+M,OAHxF,4CAJuB,sBASvB,OAAQ,gBAAC9L,GAAA,EAAD,WACN,eAAC4J,EAAA,EAAD,CAAMmC,UAAW,gBAACC,GAAA,EAAD,CAAerM,UAAU,MAAzB,iDAEf,eAACS,GAAA,EAAD,CAAQ+B,MAAO,CAAE4F,MAAO,SAAWkE,MAAM,UAAU9L,QAAQ,YAAYE,QAAO,sBAAE,sBAAA3F,EAAA,sDAC9E+Q,GAAe,GAD+D,2CAAhF,6BAFF,SAMGtN,EAAesE,KAAI,SAAAzG,GAAI,OAAI,eAAC,GAAD,CAAiCA,KAAMA,GAAnBkQ,kBAElD,eAACtC,EAAA,EAAD,CAAMmC,UAAW,gBAACC,GAAA,EAAD,CAAerM,UAAU,MAAzB,iDAEf,eAACS,GAAA,EAAD,CAAQ+B,MAAO,CAAE4F,MAAO,SAAWkE,MAAM,UAAU9L,QAAQ,YAAYE,QAAO,sBAAE,sBAAA3F,EAAA,sDAC9EiR,GAAiB,GAD6D,2CAAhF,6BAFF,SAMGvN,EAAiBqE,KAAI,SAAAxG,GAAM,OAAI,eAAC,GAAD,CAAmCA,OAAQA,GAArBiQ,kBAExD,eAAC,GAAD,CAAwB3P,OAAQA,EAAQwE,KAAMyK,EAAa1K,QAAS,WAClE2K,GAAe,GACfG,OAEF,eAAC,GAAD,CAA0BrP,OAAQA,EAAQwE,KAAM2K,EAAe5K,QAAS,WACtE6K,GAAiB,GACjBC,WC3BSO,G,oDAZb,WAAY3S,GAAQ,IAAD,+BACjB,cAAMA,IACDuG,OAAS,EAAKA,OAAOxF,KAAZ,iBAFG,E,2CAInB,WACmBvB,KAAKQ,MAAhB+C,OACN,OAAQ,eAACyD,GAAA,EAAD,CAAWC,KAAK,KAAhB,0C,GAPYb,IAAMmB,WCIxB6L,GAASC,EAAQ,KAsCRC,G,oDAnCb,WAAY9S,GAAQ,IAAD,+BACjB,cAAMA,IACDuG,OAAS,EAAKA,OAAOxF,KAAZ,iBACd,EAAKmD,IAAM,IAAInE,GACf,EAAKqE,MAAQ,CACX2O,YAAiC,GAApBvE,OAAOC,WAAmB,IAA0B,GAApBD,OAAOC,WAAmB,IACvElM,IAAK,GACLrC,IAAKsO,OAAOwE,SAASC,SAAW,KAAOzE,OAAOwE,SAASE,SAAW,IAAM1E,OAAOwE,SAASG,KAAO,KAEjG3E,OAAO4E,iBAAiB,UAAU,WAAQ,EAAKtM,SAAS,CAAEiM,YAAiC,GAApBvE,OAAOC,WAAmB,IAA0B,GAApBD,OAAOC,WAAmB,SACjI,EAAKvK,IAAI9D,UAAU+D,MAAK,SAAA5B,GACtBT,QAAQM,IAAI,MAAOG,GACnB,EAAKuE,SAAS,CAAEvE,IAAKA,IACjBA,EAAI8G,OAAS,GAAG,EAAKvC,SAAS,CAAE5G,IAAKsO,OAAOwE,SAASC,SAAW,KAAO1Q,EAAI,GAAK,IAAMiM,OAAOwE,SAASG,KAAO,SAblG,E,2CAgBnB,WAAU,IAAD,OACU3T,KAAKQ,MAAhB+C,OACN,OAAQ,gBAACyD,GAAA,EAAD,CAAWC,KAAK,KAAhB,UACN,eAACC,EAAA,EAAD,CAAYC,QAAQ,QAApB,8IACA,eAACyJ,EAAA,EAAD,UACG5Q,KAAK4E,MAAM7B,IAAI0G,KAAI,SAAAoK,GAAE,OACpB,eAACpN,GAAA,EAAD,CAAUC,QAAM,EAAUW,QAAS,WACjC,EAAKC,SAAS,CAAE5G,IAAKsO,OAAOwE,SAASC,SAAW,KAAOI,EAAK,IAAM7E,OAAOwE,SAASG,KAAO,OAD3F,SAGE,eAAC9M,GAAA,EAAD,CAAc7C,QAAS6P,KAHHA,QAO1B,eAACT,GAAD,CAAQ9G,MAAOtM,KAAK4E,MAAMlE,IAAKuG,KAAMjH,KAAK4E,MAAM2O,cAChD,gBAACrM,EAAA,EAAD,CAAYC,QAAQ,QAApB,2CAAiC,eAACyD,GAAA,EAAD,CAAUE,KAAM9K,KAAK4E,MAAMlE,IAA3B,SAAiCV,KAAK4E,MAAMlE,gB,GA/B7D0F,IAAMmB,WC0CtBuM,I,OAAc,KACpB7U,IAAO8U,OAAO,SAEd,IAAMvM,GAAYC,aAAW,SAAChD,GAAD,MAAY,CACvCoI,KAAM,CACJE,QAAS,OACTC,MAAO,QAGTgH,OAAQ,CACNC,OAAQxP,EAAMwP,OAAOC,OAAS,EAC9BC,WAAY1P,EAAM2P,YAAYC,OAAO,CAAC,QAAS,UAAW,CACxDC,OAAQ7P,EAAM2P,YAAYE,OAAOC,MACjCnV,SAAUqF,EAAM2P,YAAYhV,SAASoV,iBAGzCC,MAAO,CACLxH,SAAU,GAEZyH,YAAa,CACXC,WAAYb,GACZ9G,MAAM,eAAD,OAAiB8G,GAAjB,OACLK,WAAY1P,EAAM2P,YAAYC,OAAO,CAAC,QAAS,UAAW,CACxDC,OAAQ7P,EAAM2P,YAAYE,OAAOC,MACjCnV,SAAUqF,EAAM2P,YAAYhV,SAASwV,kBAGzCC,WAAY,CACVC,YAAa,IAEfC,KAAM,CACJhI,QAAS,QAEXmH,OAAQ,CACNlH,MAAO8G,GACPkB,WAAY,EACZxM,WAAY,UAEdyM,WAAY,CACVjI,MAAO8G,GACPK,WAAY1P,EAAM2P,YAAYC,OAAO,QAAS,CAC5CC,OAAQ7P,EAAM2P,YAAYE,OAAOC,MACjCnV,SAAUqF,EAAM2P,YAAYhV,SAASwV,kBAGzCM,YAAY,aACVf,WAAY1P,EAAM2P,YAAYC,OAAO,QAAS,CAC5CC,OAAQ7P,EAAM2P,YAAYE,OAAOC,MACjCnV,SAAUqF,EAAM2P,YAAYhV,SAASoV,gBAEvC1H,UAAW,SACXE,MAAOvI,EAAM6I,QAAQ,GAAK,GACzB7I,EAAM0Q,YAAYC,GAAG,MAAQ,CAC5BpI,MAAOvI,EAAM6I,QAAQ,KAGzB+H,QAAQ,aACNtI,QAAS,OACTuI,WAAY,SACZC,eAAgB,WAChB1M,QAASpE,EAAM6I,QAAQ,EAAG,IAEvB7I,EAAM+Q,OAAOH,SAElB3N,QAAS,CACPuF,SAAU,EACVpE,QAASpE,EAAM6I,QAAQ,GACvBN,MAAO,OACPF,UAAW,YAcA,SAAS2I,KAAO,IAAD,IACtBpM,EAAU7B,KACV/C,EAAQiR,cAFc,EAGJtP,IAAM8E,UAAS,GAHX,mBAGrBnD,EAHqB,KAGfsJ,EAHe,OAIQjL,IAAM8E,UAAS,GAJvB,mBAIrByK,EAJqB,KAITC,EAJS,KAW5BxP,IAAMyP,WAAU,WACd,IAAMC,EAAiB,WACrB,IAAI9I,EAAQgC,OAAOC,YAEdlH,GAAQiF,GARQ,KAQmBqE,GAAQ,GAC5CtJ,GAAQiF,GARU,KAQkBqE,GAAQ,IAKlD,OAHArC,OAAO4E,iBAAiB,OAAQkC,GAChC9G,OAAO4E,iBAAiB,SAAUkC,GAE3B,WACL9G,OAAO+G,oBAAoB,OAAQD,GACnC9G,OAAO+G,oBAAoB,SAAUD,OA+BzC,OACE,sBAAKpL,UAAWrB,EAAQwD,KAAxB,SACE,gBAACmJ,EAAA,EAAD,CAAevR,MAAOe,GAAMqF,WAAWtH,OAAOkB,MAA9C,UACE,eAAC,IAAD,UACE,gBAAC,IAAD,CAAyBwR,MAAOC,IAAanC,OAAO,QAApD,UACE,eAACoC,EAAA,EAAD,IACA,eAACC,EAAA,EAAD,CACEC,SAAS,QACT3L,UAAW4L,YAAKjN,EAAQ2K,OAAT,eACZ3K,EAAQqL,YAAc3M,IAH3B,SAME,gBAACwO,EAAA,EAAD,WACE,eAACzH,EAAA,EAAD,CACEmE,MAAM,UACN5E,aAAW,cACXhH,QAxCS,WACvBgK,GAAQ,IAwCMjC,KAAK,QACL1E,UAAW4L,YAAKjN,EAAQwL,WAAT,eACZxL,EAAQ0L,KAAOhN,IANpB,SASE,eAAC,IAAD,MAEF,eAACb,EAAA,EAAD,CAAYC,QAAQ,KAAKqP,QAAM,EAAC9L,UAAWrB,EAAQoL,MAAnD,8DAGA,eAAC3F,EAAA,EAAD,CACEmE,MAAM,UACN5E,aAAW,QACXhH,QA9CQ,WAEtBuO,GAAc,IAyCF,SAKE,eAAC,IAAD,WAIN,gBAACa,EAAA,EAAD,CACEtP,QAAQ,YACRuD,UAAW4L,YAAKjN,EAAQ6K,QAAT,mBACZ7K,EAAQ4L,WAAalN,GADT,cAEZsB,EAAQ6L,aAAenN,GAFX,IAIfsB,QAAS,CACP8D,MAAOmJ,aAAI,mBACRjN,EAAQ4L,WAAalN,GADb,cAERsB,EAAQ6L,aAAenN,GAFf,KAPf,UAaE,sBAAK2C,UAAWrB,EAAQgM,QAAxB,SACE,eAACvG,EAAA,EAAD,CAAYzH,QAtEA,WACxBgK,GAAQ,IAqEI,SACuB,QAApB5M,EAAMiS,UAAsB,eAAC,IAAD,IAAuB,eAAC,IAAD,QAGxD,eAACxO,EAAA,EAAD,IACA,gBAAC0I,EAAA,EAAD,CAAMvJ,QA9DQ,YACpB2H,OAAOC,WAAa,KAAoC,MAA7BD,OAAOwE,SAASmD,WAC7CtF,GAAQ,IA4DA,UACE,eAAC,GAAD,CAAcnL,GAAG,IAAIlC,QAAQ,qBAAMiC,KAAM,eAAC,IAAD,MACzC,eAAC,GAAD,CAAcC,GAAG,aAAalC,QAAQ,2BAAOiC,KAAM,eAAC,IAAD,MACnD,eAAC,GAAD,CAAcC,GAAG,cAAclC,QAAQ,2BAAOiC,KAAM,eAAC,IAAD,MACpD,eAAC,GAAD,CAAcC,GAAG,YAAYlC,QAAQ,eAAKiC,KAAM,eAAC,IAAD,MAChD,eAAC,GAAD,CAAcC,GAAG,UAAUlC,QAAQ,eAAKiC,KAAM,eAAC,IAAD,MAC7CjI,KAAmB,KAAO,eAAC,GAAD,CAAckI,GAAG,WAAWlC,QAAQ,2BAAOiC,KAAM,eAAC,IAAD,YAGhF,wBAAMyE,UAAWrB,EAAQ3B,QAAzB,UACE,sBAAKgD,UAAWrB,EAAQgM,UAoCxB,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOuB,KAAM,IAAKC,OAAO,EAAzB,SACE,eAAC,GAAD,CAAQtT,OAAQiC,GAAMqF,WAAWtH,WAEnC,eAAC,IAAD,CAAOqT,KAAM,aAAcC,OAAO,EAAlC,SACE,eAAC,GAAD,CAAUtT,OAAQiC,GAAMqF,WAAWtH,WAErC,eAAC,IAAD,CAAOqT,KAAM,cAAeC,OAAO,EAAnC,SACE,eAAC,GAAD,CAAWtT,OAAQiC,GAAMqF,WAAWtH,WAEtC,eAAC,IAAD,CAAOqT,KAAM,YAAaC,OAAO,EAAjC,SACE,eAAC,GAAD,CAAUtT,OAAQiC,GAAMqF,WAAWtH,WAErC,eAAC,IAAD,CAAOqT,KAAM,UAAWC,OAAO,EAA/B,SACE,eAAC,GAAD,CAAQtT,OAAQiC,GAAMqF,WAAWtH,WAEnC,eAAC,IAAD,CAAOqT,KAAM,WAAYC,OAAO,EAAhC,SACE,eAAC,GAAD,CAAStT,OAAQiC,GAAMqF,WAAWtH,sBAM5C,eAAC,GAAD,CAAaA,OAAQiC,GAAMqF,WAAWtH,OAAQwE,KAAM4N,GAAcnQ,GAAMqF,WAAWtH,OAAOlC,UAAWyG,QAvIlF,WACvB8N,GAAc,YAtDN,IAAIrV,IACZU,gBAAgB0D,MAAK,SAAAU,GlB1GlB,IAAqB5C,EkB2G1BH,QAAQM,IAAI,WAAYyC,GACxBG,GAAMM,UlB5GoBrD,EkB4GC4C,ElB3GpB,SAAAS,GACLA,EAAS,CAAE/B,KAAM,gBAAiBtB,KAAMA,UmBpB5C,IAYeqU,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBrS,MAAK,YAAkD,IAA/CsS,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,8CCKd,0CAAArV,EAAA,sDAAyB6P,EAAzB,+BAAiC,IACzB7M,EAAM,IAAInE,GADlB,uBAGUmE,EAAI7D,qBAAqB8D,MAAK,SAAAkO,GAAWrN,GAAMM,SAASD,GAAkBgN,OAHpF,uBAIUnO,EAAI3D,uBAAuB4D,MAAK,SAAAmO,GAAatN,GAAMM,SAASC,GAAoB+M,OAJ1F,uBAKUxT,GAAMiS,GALhB,mE,sBASA+F,IAASvQ,OAEP,eAAC,IAAD,CAAUvB,MAAOA,GAAjB,SACE,eAAC,GAAD,MAGF+R,SAASC,eAAe,S,oCAG1BC,GAKAX,O","file":"static/js/main.bde5bdc2.chunk.js","sourcesContent":["import moment from 'moment';\r\nimport 'moment/locale/zh-cn'\r\n\r\nexport function isMobileDevice() {\r\n  const sUserAgent = navigator.userAgent;\r\n  return (sUserAgent.indexOf('Android') > -1 || sUserAgent.indexOf('iPhone') > -1 || sUserAgent.indexOf('iPad') > -1 || sUserAgent.indexOf('iPod') > -1 || sUserAgent.indexOf('Symbian') > -1);\r\n}\r\n\r\n/** \r\n* param 将要转为URL参数字符串的对象 \r\n* key URL参数字符串的前缀 \r\n* encode true/false 是否进行URL编码,默认为true \r\n*  \r\n* return URL参数字符串 \r\n*/\r\nexport function urlEncode(param, key, encode) {\r\n  if (param == null) return '';\r\n  var paramStr = '';\r\n  var t = typeof (param);\r\n  if (t === 'string' || t === 'number' || t === 'boolean') {\r\n    paramStr += '&' + key + '=' + ((encode == null || encode) ? encodeURIComponent(param) : param);\r\n  } else {\r\n    for (var i in param) {\r\n      var k = key == null ? i : key + (param instanceof Array ? '[' + i + ']' : '.' + i);\r\n      paramStr += urlEncode(param[i], k, encode);\r\n    }\r\n  }\r\n  return paramStr;\r\n};\r\n\r\nexport function urlEncode2(obj) {\r\n  try {\r\n    return JSON.stringify(obj).replace(/:/g, \"=\").replace(/\"/g, '').replace(/,/g, '&').match(/\\{([^)]*)\\}/)[1];\r\n  } catch (e) {\r\n    console.error(e);\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport function parseTimePoint(time) {\r\n  return moment().format('LLLL', time);\r\n}\r\n\r\nexport function parseTimePeriod(time) {\r\n  return moment.duration(time).humanize();\r\n}\r\n\r\nexport function getTextFieldValue(el) {\r\n  return el.current.childNodes[el.current.childElementCount - 1].childNodes[0].value;\r\n}\r\n\r\nexport function sleep(time_ms) {\r\n  return new Promise(accept => {\r\n    setTimeout(accept, time_ms);\r\n  });\r\n}\r\n\r\n// 设置到本周的星期几\r\nDate.prototype.setDay = function (day) {\r\n  let day_ = this.getDay();\r\n  if (day_ === day) return this;\r\n  this.setTime(this.getTime() + 1000 * 60 * 60 * 24 * (day - day_));\r\n  return this;\r\n};\r\n\r\n// 获取 YYYY-MM-DD 格式\r\nDate.prototype.toDateString = function () {\r\n  return this.toISOString().slice(0, 10);\r\n};\r\n\r\n// export function cutString(str, length=10)","import { urlEncode } from \"../utils/utils\"\r\n\r\nclass API {\r\n  constructor(props) {\r\n    // this.url_base = 'http://localhost:8000/api/v1/';\r\n    this.url_base = '/api/v1/';\r\n    // this.url_base = 'http://localhost:12000/api/v1/';\r\n    // this.url_base = 'http://localhost:8000/';\r\n    // this.url_base = 'http://localhost:8001/';\r\n    this.url = {\r\n      test: 'test',\r\n      get_ips: 'get/ips',\r\n      get_timetable_node: \"get/timetable_node\",\r\n      add_timetable_node: \"add/timetable_node\",\r\n      get_timetable_period: \"get/timetable_period\",\r\n      add_timetable_period: \"add/timetable_period\",\r\n      get_shop_info: \"get/shop_info\",\r\n      get_reserve_date: 'get/reserve_date',\r\n      get_reserve_table: 'get/reserve_table',\r\n      logout: \"logout\",\r\n      has_login: 'has_login',\r\n    }\r\n    this.request = this.request.bind(this);\r\n    this.test = this.test.bind(this);\r\n    this.get_ips = this.get_ips.bind(this);\r\n  }\r\n  async request(router, args, method = 'GET') {\r\n    let js = {};\r\n    if (method === 'GET') {\r\n      js = await ((await fetch(this.url_base + router + (args ? \"?\" : \"\") + urlEncode(args), {\r\n        method: 'GET',\r\n        credentials: 'omit',\r\n        // credentials: 'include',\r\n        mode: 'cors'\r\n      })).json());\r\n    } else {\r\n      js = await (await fetch(this.url_base + router, {\r\n        body: JSON.stringify(args),\r\n        method: 'POST',\r\n        // 使用 include 会拖慢速度\r\n        // credentials: 'include',\r\n        credentials: 'omit',\r\n        mode: 'cors',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n        },\r\n      })).json();\r\n    }\r\n    if (js.code !== 200) {\r\n      console.warn(\"Request responsed with code\", js.code, 'message:', js.message, 'data:', js.data);\r\n    }\r\n    if (!(js.data.timetable_node || js.data.timetable_period))\r\n      console.log('resp', js);\r\n    // 过长的json可能不自动转换\r\n    if (typeof (js) === 'string') {\r\n      try {\r\n        js = JSON.parse(js);\r\n      } catch (e) {\r\n        console.warn(e);\r\n      }\r\n    }\r\n    return js;\r\n  }\r\n  async test() {\r\n    return (await this.request(this.url.test)).data.test;\r\n  }\r\n  async logout() {\r\n    return (await this.request(this.url.logout)).code;\r\n  }\r\n  async has_login() {\r\n    return (await this.request(this.url.has_login)).data.has_login;\r\n  }\r\n  async get_ips() {\r\n    return (await this.request(this.url.get_ips)).data.ips;\r\n  }\r\n  async get_timetable_node() {\r\n    return (await this.request(this.url.get_timetable_node)).data.timetable_node;\r\n  }\r\n  async add_timetable_node(node) {\r\n    return await this.request(this.url.add_timetable_node, node, 'POST');\r\n  }\r\n  async get_timetable_period() {\r\n    return (await this.request(this.url.get_timetable_period)).data.timetable_period;\r\n  }\r\n  async add_timetable_period(period) {\r\n    return await this.request(this.url.add_timetable_period, period, 'POST');\r\n  }\r\n  async get_shop_info() {\r\n    return (await this.request(this.url.get_shop_info)).data.shop_info;\r\n  }\r\n  async get_reserve_date() {\r\n    return (await this.request(this.url.get_reserve_date)).data.reserve_date;\r\n  }\r\n  async get_reserve_table(date) {\r\n    // console.log('date', date);\r\n    return (await this.request(this.url.get_reserve_table, { date: date })).data.reserve_table;\r\n  }\r\n}\r\n\r\nexport { API };","import { combineReducers } from 'redux'\r\nimport Config from \"../Config\"\r\n\r\nconst defaultState = {\r\n  config: new Config(),\r\n  reserveTableData: {},\r\n  roomStockData: null,\r\n  timetableNodes: [],\r\n  timetablePeriods: [],\r\n  shopInfo: null,\r\n}\r\n\r\nfunction config(state = defaultState.config, action) {\r\n  switch (action.type) {\r\n    case \"SET_CONFIG\":\r\n      return action.data;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction reserveTableData(state = defaultState.reserveTableData, action) {\r\n  switch (action.type) {\r\n    case \"SET_RESERVE_TABLE_DATA\":\r\n      return action.data;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction roomStockData(state = defaultState.roomStockData, action) {\r\n  switch (action.type) {\r\n    case \"SET_ROOM_STOCK_DATA\":\r\n      return action.data;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction shopInfo(state = defaultState.reserveTableData, action) {\r\n  switch (action.type) {\r\n    case \"SET_SHOP_INFO\":\r\n      return action.data;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n\r\nfunction timetableNodes(state = defaultState.timetableNodes, action) {\r\n  switch (action.type) {\r\n    case \"SET_TIMETABLE_NODES\":\r\n      return action.data;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction timetablePeriods(state = defaultState.timetableNodes, action) {\r\n  switch (action.type) {\r\n    case \"SET_TIMETABLE_PERIODS\":\r\n      return action.data;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default combineReducers({ config, reserveTableData, roomStockData, shopInfo, timetableNodes, timetablePeriods });\r\n","import { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\r\nimport { orange, grey, blueGrey } from '@material-ui/core/colors';\r\nimport { API } from \"./api/api\";\r\n\r\nclass Config {\r\n  ITEM_NAME = \"group_bying_config\";\r\n  constructor() {\r\n    this.load = this.load.bind(this);\r\n    this.save = this.save.bind(this);\r\n    this.theme_avaliable = {\r\n      \"default\": createMuiTheme({}),\r\n      dark: createMuiTheme({\r\n        palette: {\r\n          type: \"dark\",\r\n          primary: {\r\n            main: blueGrey[500],\r\n          },\r\n          secondary: {\r\n            main: grey[500],\r\n          },\r\n        },\r\n      }),\r\n    }\r\n    // 在构造函数执行的时候加载保存的数据\r\n    this.data_default = {\r\n      debug: true,\r\n      version_frontend: 0.1,\r\n      // 显示主题\r\n      theme_name: \"dark\",\r\n      theme_avaliable: [\r\n        'default',\r\n        'dark'\r\n      ],\r\n    };\r\n    this.data = this.data_default;\r\n    this.theme = this.theme_avaliable[\"default\"];\r\n    this.api = new API();\r\n    // 先声明已经登录，然后再检查登录状态\r\n    this.has_login = true;\r\n    this.api.has_login().then(state => { this.has_login = state; });\r\n    this.load();\r\n  }\r\n\r\n  load() {\r\n    console.log(\"Config: loading config...\");\r\n    if (this.data.debug) {\r\n      console.log(\"Config: load default config.\");\r\n      this.save();\r\n    }\r\n    try {\r\n      this.data = JSON.parse(localStorage.getItem(this.ITEM_NAME));\r\n      if (!this.data) throw new Error(\"Null data\");\r\n      console.log(\"Got data:\", this.data);\r\n      if (!this.data.version_frontend || this.data.version_frontend < this.data_default.version_frontend) {\r\n        // 版本升级，增量更新\r\n        console.log(`Config: update ${this.data.version_frontend} -> ${this.data_default.version_frontend}`);\r\n        this.data.version_frontend = this.data_default.version_frontend;\r\n        for (let k in this.data_default) {\r\n          if (!this.data[k]) {\r\n            console.log(`    Config: add value ${k}`);\r\n            this.data[k] = this.data_default[k];\r\n          }\r\n        }\r\n        this.save();\r\n      }\r\n    } catch (e) {\r\n      console.warn(`Can not find ${this.ITEM_NAME} in localStorage, use default config.`);\r\n      this.data = this.data_default;\r\n      this.save();\r\n    }\r\n    this.theme = this.theme_avaliable[this.data.theme_name];\r\n    if (!this.theme) this.theme = this.theme_avaliable[\"default\"];\r\n  }\r\n\r\n  save() {\r\n    console.log(\"Config: saving config...\");\r\n    localStorage.setItem(this.ITEM_NAME, JSON.stringify(this.data));\r\n  }\r\n};\r\n\r\nexport default Config;","// applyMiddleware: redux通过该函数来使用中间件\r\n// createStore: 用于创建store实例\r\nimport { applyMiddleware, createStore } from 'redux'\r\n\r\n// 中间件，作用：如果不使用该中间件，当我们dispatch一个action时，需要给dispatch函数传入action        \r\n// 对象；但如果我们使用了这个中间件，那么就可以传入一个函数，这个函数接收两个参数:dispatch和    \r\n// getState。这个dispatch可以在将来的异步请求完成后使用，对于异步action很有用\r\nimport thunk from 'redux-thunk'\r\n\r\n// 引入reducer\r\nimport reducers from './reducers.js'\r\n\r\n// 创建store实例\r\nlet store = createStore(\r\n    reducers,\r\n    applyMiddleware(thunk)\r\n)\r\nexport default store","export function setConfig(data) {\r\n  return dispatch => {\r\n    dispatch({ type: \"SET_CONFIG\", data: data });\r\n  };\r\n}\r\n\r\nexport function setReserveTableData(data) {\r\n  return dispatch => {\r\n    dispatch({ type: \"SET_RESERVE_TABLE_DATA\", data: data });\r\n  };\r\n}\r\n\r\nexport function setRoomStockData(data) {\r\n  return dispatch => {\r\n    dispatch({ type: \"SET_ROOM_STOCK_DATA\", data: data });\r\n  };\r\n}\r\n\r\nexport function setShopInfo(data) {\r\n  return dispatch => {\r\n    dispatch({ type: \"SET_SHOP_INFO\", data: data });\r\n  };\r\n}\r\n\r\nexport function setTimetableNodes(data) {\r\n  return dispatch => {\r\n    dispatch({ type: \"SET_TIMETABLE_NODES\", data: data });\r\n  };\r\n}\r\n\r\nexport function setTimetablePeriods(data) {\r\n  return dispatch => {\r\n    dispatch({ type: \"SET_TIMETABLE_PERIODS\", data: data });\r\n  };\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { ListItem, ListItemText, ListItemIcon } from '@material-ui/core';\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nfunction ListItemLink(props) {\r\n  const { icon, primary, to } = props;\r\n\r\n  const renderLink = React.useMemo(\r\n    () => React.forwardRef((itemProps, ref) => <RouterLink to={to} ref={ref} {...itemProps} />),\r\n    [to],\r\n  );\r\n\r\n  return (\r\n    <li>\r\n      <ListItem button component={renderLink}>\r\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\r\n        <ListItemText primary={primary} />\r\n      </ListItem>\r\n    </li>\r\n  );\r\n}\r\n\r\nListItemLink.propTypes = {\r\n  icon: PropTypes.element,\r\n  primary: PropTypes.string.isRequired,\r\n  to: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ListItemLink;\r\n\r\n","import React from 'react';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { setConfig } from \"../data/action\";\r\nimport { Button } from '@material-ui/core';\r\nimport { API } from \"../api/api\";\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.render = this.render.bind(this);\r\n    this.state = {\r\n      has_login: true\r\n    };\r\n    this.api = new API();\r\n  }\r\n  render() {\r\n    let { config } = this.props;\r\n    return (<Container size=\"sm\">\r\n      <Typography variant=\"body1\">{this.state.has_login ? \"点击“重新登录”会清除后台登录信息，是否继续？\" : \"请在稍后弹出的窗口中完成登录\"}</Typography>\r\n      <Button variant=\"contained\" onClick={() => {\r\n        this.api.logout();\r\n        this.setState({ has_login: false });\r\n      }}>重新登录</Button>\r\n    </Container >)\r\n  }\r\n};\r\n\r\nexport default Login;","import React from 'react'\r\nimport Container from '@material-ui/core/Container';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { DialogContent } from '@material-ui/core';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PropTypes from 'prop-types';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Login from \"./login\"\r\nimport { setConfig } from \"../data/action\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  content: {\r\n    marginTop: \"20%\",\r\n    marginBottom: \"20%\"\r\n  }\r\n}));\r\n\r\nfunction LoginDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, open } = props;\r\n\r\n  const handleClose = () => {\r\n    if (onClose)\r\n      onClose();\r\n  };\r\n\r\n  const { config } = props;\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open}>\r\n      <DialogTitle>账户登录</DialogTitle>\r\n      <Divider></Divider>\r\n      <DialogContent>\r\n        <Login config={config}></Login>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nLoginDialog.propTypes = {\r\n  onClose: PropTypes.func,\r\n  open: PropTypes.bool.isRequired,\r\n  config: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default LoginDialog;","import React from 'react';\r\nimport { Box, Container, LinearProgress, Button, Dialog, Link } from '@material-ui/core';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { API } from '../api/api';\r\nimport store from '../data/store';\r\nimport { setReserveTableData } from '../data/action'\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 1200,\r\n  },\r\n  foodDesc: {\r\n    overflow: 'hidden',\r\n    whiteSpace: 'nowrap',\r\n    contentOverflow: 'ellipsis',\r\n    maxWidth: 160\r\n  }\r\n});\r\nfunction MyTableCell(props) {\r\n  let styles = { padding: 3 };\r\n  // console.log('props.noBorder', props.noBorder);\r\n  if (props.noBorder) styles.borderBottom = \"0\";\r\n  return <TableCell align={props.align} colSpan={props.colSpan} style={styles}>{props.content}</TableCell>\r\n}\r\n\r\nconst api = new API();\r\n\r\n// 容易subscribe到已经卸载的component上面...\r\n// store.subscribe(() => {\r\n//   console.log('(tables) redux update to', store.getState());\r\n// });\r\n\r\nfunction Period(props) {\r\n  const classes = useStyles();\r\n  const { data, roomList } = props;\r\n  // console.log('period', data, 'roomList', roomList);\r\n  // 先找到有几个row，再格式化输出\r\n  let maxRow = 0;\r\n  let roomNameList = [];\r\n  roomList.map((roomData, i) => {\r\n    maxRow = maxRow > data.roomMapItemEntry[roomData.roomName].length ? maxRow : data.roomMapItemEntry[roomData.roomName].length;\r\n    roomNameList.push(roomData.roomName);\r\n  });\r\n  // console.log('maxRow', maxRow);\r\n  let targetRowCenter = parseInt(maxRow / 2);\r\n  if (targetRowCenter < 0) targetRowCenter = 0;\r\n  // console.log('targetRowCenter', targetRowCenter);\r\n  let rows = [];\r\n  for (let i = 0; i < maxRow; i++) {\r\n    let cells = [<MyTableCell key=\"time\" key2=\"time\" align=\"center\" colSpan={1} content={targetRowCenter === i ? data.periodId : null} noBorder={maxRow - 1 !== i}></MyTableCell>,];\r\n    for (let name of roomNameList) {\r\n      // if (!(data.roomMapItemEntry[name] instanceof Array)) {\r\n      if (!(data.roomMapItemEntry[name][i])) {\r\n        // 没这个项的话也要占个位置\r\n        cells.push(<MyTableCell key={data.periodId + name + i + '_'} colSpan={1}></MyTableCell>);\r\n        continue;\r\n      }\r\n      let roomItem = data.roomMapItemEntry[name][i];\r\n      // 价格\r\n      cells.push(<MyTableCell key={data.periodId + name + roomItem.itemId + i + 'price'} align=\"center\" colSpan={1} content={'￥' + roomItem.price}></MyTableCell>);\r\n      // 说明\r\n      cells.push(<MyTableCell key={data.periodId + name + roomItem.itemId + i + 'desc'} align=\"center\" colSpan={1} content={<Box component=\"div\" className={classes.foodDesc}>\r\n        {roomItem.foodDesc}</Box>}></MyTableCell>);\r\n      // 库存\r\n      cells.push(<MyTableCell key={data.periodId + name + roomItem.itemId + i + 'stock'} align=\"center\" colSpan={1} content={i === targetRowCenter ? (roomItem.stock + '间') : ''} noBorder={maxRow - 1 !== i}></MyTableCell>);\r\n      // 计划\r\n      cells.push(<MyTableCell key={data.periodId + name + roomItem.itemId + i + 'plan'} align=\"center\" colSpan={1} content={\r\n        <Link key={data.periodId + name + roomItem.itemId + i + 'planLink'} onClick={() => {\r\n          console.log('roomItem', roomItem);\r\n          // 查找\r\n          const { timetableNodes, timetablePeriods } = store.getState();\r\n          \r\n        }} href=\"#!\">计划</Link>\r\n      }></MyTableCell>);\r\n      // 临时下线\r\n      cells.push(<MyTableCell key={data.periodId + name + roomItem.itemId + i + 'off'} align=\"center\" colSpan={1} content={\r\n        <Link key={data.periodId + name + roomItem.itemId + i + 'planLink'} onClick={() => {\r\n          console.log('roomItem', roomItem);\r\n        }} href=\"#!\">下线</Link>\r\n      }></MyTableCell>);\r\n    }\r\n    // console.log('cells', cells);\r\n    rows.push(<TableRow key={data.periodId + i}>{cells}</TableRow>);\r\n  }\r\n  return rows;\r\n}\r\n\r\nlet requestedDayData = null;\r\n\r\nfunction ReserveTable(props) {\r\n  const classes = useStyles();\r\n  const { day, config, data } = props;\r\n  const date = new Date().setDay(day).toDateString();\r\n  const [dayData, setDayData] = React.useState(data ? data : store.getState().reserveTableData[date]);\r\n  const [roomList, setRoomList] = React.useState(store.getState().reserveTableData[date] ? store.getState().reserveTableData[date].roomList : []);\r\n  requestedDayData = JSON.stringify(store.getState().reserveTableData[date]) !== '{}' && JSON.stringify(store.getState().reserveTableData[date]) !== undefined;\r\n  // console.log('requested', requestedDayData);\r\n  console.log('date', date);\r\n\r\n  // if (JSON.stringify(store.getState().reserveTableData[date]) === '{}') {\r\n  if (!dayData) {\r\n    // console.log('{}!');\r\n    if (!requestedDayData) {\r\n      requestedDayData = true;\r\n      api.get_reserve_table(date).then(reserveTableData => {\r\n        // console.log('reserveTableData', reserveTableData);\r\n        let t = store.getState().reserveTableData;\r\n        t[date] = reserveTableData;\r\n        store.dispatch(setReserveTableData(t));\r\n        setDayData(reserveTableData);\r\n        setRoomList(reserveTableData.roomList);\r\n        requestedDayData = false;\r\n      })\r\n    } else {\r\n      let reserveTableData = store.getState().reserveTableData[date];\r\n      // console.log('got from redux:', reserveTableData);\r\n      if (reserveTableData) {\r\n        setDayData(reserveTableData);\r\n        setRoomList(reserveTableData.roomList);\r\n      } else {\r\n        // console.warn('got empty reserveTableData', dayData, store.getState().reserveTableData, date, JSON.stringify(store.getState().reserveTableData[date]));\r\n      }\r\n    }\r\n    return (<Container>\r\n      <LinearProgress></LinearProgress>\r\n    </Container>);\r\n  }\r\n  let tableHeaderCells = [<TableCell key=\"time\" align=\"center\" colSpan={1}>时间</TableCell>,];\r\n  roomList.map((d, i) => {\r\n    tableHeaderCells.push(<TableCell key={'a' + d + i} align=\"center\" colSpan={2}>售卖内容</TableCell>);\r\n    tableHeaderCells.push(<TableCell key={'b' + d + i} align=\"center\" colSpan={1}>库存</TableCell>);\r\n    tableHeaderCells.push(<TableCell key={'c' + d + i} align=\"center\" colSpan={1}>计划</TableCell>);\r\n    tableHeaderCells.push(<TableCell key={'d' + d + i} align=\"center\" colSpan={1}>临时下线</TableCell>);\r\n  });\r\n  const tableHeader = <TableHead>\r\n    <TableRow>\r\n      <TableCell align=\"center\" colSpan={1}>[{'周' + [\"日\", '一', '二', '三', '四', '五', '六'][day]}]</TableCell>\r\n      {roomList.map((d, i) =>\r\n        <TableCell align=\"center\" key={i} colSpan={5}>{d.roomName}({d.roomCapacity})</TableCell>\r\n      )}\r\n    </TableRow>\r\n    <TableRow>\r\n      {tableHeaderCells}\r\n    </TableRow>\r\n  </TableHead>;\r\n  if (!dayData || !dayData.periodList) {\r\n    // console.log('no data!', dayData, typeof (dayData));\r\n    return (<Container>\r\n      <header></header>\r\n      <LinearProgress></LinearProgress>\r\n    </Container>);\r\n  }\r\n  return (\r\n    <Container>\r\n      <TableContainer component={Paper}>\r\n        <Table stickyHeader className={classes.table}>\r\n          {tableHeader}\r\n          <TableBody>\r\n            {dayData.periodList.map((d, i) =>\r\n              <Period key={'period' + i} data={d} roomList={roomList}></Period>\r\n            )}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default ReserveTable;","import React from 'react'\r\nimport { LinearProgress, Button, Container, Dialog, DialogTitle, IconButton } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport ReserveTable from './reserveTable';\r\nimport { API } from '../api/api';\r\nimport store from '../data/store';\r\nimport { setReserveTableData } from '../data/action'\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`scrollable-auto-tabpanel-${index}`}\r\n      aria-labelledby={`scrollable-auto-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box>\r\n          {/* <Typography>{children}</Typography> */}\r\n          {children}\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    overflowX: 'auto',\r\n    display: 'block',\r\n    width: '100%',\r\n    flexGrow: 1,\r\n    width: '100%',\r\n    backgroundColor: theme.palette.background.paper,\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `scrollable-auto-tab-${index}`,\r\n    'aria-controls': `scrollable-auto-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nexport default function ReserveTables(props) {\r\n  const { config } = props;\r\n  const classes = useStyles();\r\n  const [tabValue, setTableValue] = React.useState(new Date().getDay());\r\n  const [showTable, setShowTable] = React.useState(false);\r\n  const [fullShow, setFullShow] = React.useState(false);\r\n  const handleChange = (event) => {\r\n    setTableValue(event.target.value);\r\n  };\r\n  const table = <div className={classes.root}>\r\n    <Tabs\r\n      value={tabValue}\r\n      onChange={(e, val) => setTableValue(val)}\r\n      indicatorColor=\"primary\"\r\n      textColor=\"primary\"\r\n      variant=\"scrollable\"\r\n      scrollButtons=\"auto\"\r\n      aria-label=\"scrollable auto tabs example\"\r\n    >\r\n      {[\"日\", '一', '二', '三', '四', '五', '六'].map((d, i) => {\r\n        return (<Tab label={'周' + d} key={i} {...a11yProps(i)} />);\r\n      })}\r\n    </Tabs>\r\n    {[0, 1, 2, 3, 4, 5, 6].map((d, i) => <TabPanel key={i} value={tabValue} index={d}>\r\n      <ReserveTable day={tabValue} config={config}></ReserveTable>\r\n    </TabPanel>)}\r\n  </div>;\r\n  return (\r\n    // <Container className={classes.root}>\r\n    <div>\r\n      <FormControl className={classes.formControl}>\r\n        <InputLabel>选择日期</InputLabel>\r\n        <Select\r\n          value={tabValue}\r\n          onChange={handleChange}\r\n        >\r\n          {['日', '一', '二', '三', '四', '五', '六'].map((d, i) => <MenuItem key={i} value={i}>{'周' + d}</MenuItem>)}\r\n        </Select>\r\n      </FormControl>\r\n      <IconButton style={{ float: 'right' }} variant=\"contained\" onClick={() => {\r\n        setShowTable(true);\r\n        setFullShow(true);\r\n      }}><FullscreenIcon /></IconButton>\r\n      { window.innerWidth >= 600 ? table : <Button fullWidth variant=\"contained\" onClick={() => { setShowTable(!showTable); }}>点击{showTable ? \"隐藏\" : \"显示\"}表格</Button>}\r\n      <Dialog fullScreen={fullShow} onClose={() => { setShowTable(false); }} open={showTable}>\r\n        <DialogTitle>\r\n          <Box component=\"span\">周{['日', '一', '二', '三', '四', '五', '六'][tabValue]}({new Date().setDay(tabValue).toDateString()})数据</Box>\r\n          {fullShow ? <IconButton edge=\"end\" style={{ float: 'right' }} onClick={() => { setFullShow(false); }}><FullscreenExitIcon /></IconButton> : <IconButton style={{ float: 'right' }} variant=\"contained\" onClick={() => {\r\n            setShowTable(true);\r\n            setFullShow(true);\r\n          }}><FullscreenIcon /></IconButton>}</DialogTitle>\r\n        {table}\r\n      </Dialog>\r\n      {/* </Container > */}\r\n    </div>\r\n  );\r\n\r\n}\r\n\r\n","import React from \"react\"\r\nimport Container from '@material-ui/core/Container';\r\nimport ReserveTables from \"../components/reserveTables\";\r\nimport { Divider, Table, TableBody, TableCell, TableRow, Typography } from \"@material-ui/core\";\r\nimport store from \"../data/store\";\r\n\r\nfunction Launch() {\r\n  const { timetableNodes, timetablePeriods, config } = store.getState();\r\n  return (<Container style={{ overflowX: 'auto', width: '100%' }}>\r\n    <Typography variant=\"h5\">执行状态</Typography>\r\n    <Table>\r\n      <TableBody>\r\n        <TableRow>\r\n          <TableCell align=\"center\">任务种类数</TableCell>\r\n          <TableCell align=\"center\">按照时间点调整</TableCell>\r\n          <TableCell align=\"center\">按照时间点调整</TableCell>\r\n          <TableCell align=\"center\">按照库存量调整</TableCell>\r\n        </TableRow>\r\n        <TableRow>\r\n          <TableCell align=\"center\">{0}种</TableCell>\r\n          <TableCell align=\"center\">{timetableNodes.length}个任务</TableCell>\r\n          <TableCell align=\"center\">{timetablePeriods.length}个任务</TableCell>\r\n          <TableCell align=\"center\">{0}个任务</TableCell>\r\n        </TableRow>\r\n      </TableBody>\r\n    </Table>\r\n    {/* <Divider></Divider> */}\r\n    <br />\r\n    <Typography variant=\"h5\">数据总览</Typography>\r\n    {/* <Divider></Divider> */}\r\n    <ReserveTables config={config} />\r\n  </Container>);\r\n}\r\n\r\nexport default Launch;","import React from \"react\"\r\nimport Container from '@material-ui/core/Container';\r\n\r\nclass Settings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.render = this.render.bind(this);\r\n  }\r\n  render() {\r\n    let { config } = this.props;\r\n    return (<Container size=\"xs\">\r\n      设置\r\n    </Container>)\r\n  }\r\n};\r\n\r\nexport default Settings;","import React from \"react\"\r\nimport Container from '@material-ui/core/Container';\r\n\r\nclass Verify extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.render = this.render.bind(this);\r\n  }\r\n  render() {\r\n    let { config } = this.props;\r\n    return (<Container size=\"xs\">\r\n      授权页面\r\n    </Container>)\r\n  }\r\n};\r\n\r\nexport default Verify;","import React from 'react';\r\nimport { TextField, List, ListItem, ListItemText, ListItemIcon, ListItemSecondaryAction, IconButton, Button } from '@material-ui/core';\r\nimport { makeStyles, useTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport AlarmOnIcon from '@material-ui/icons/AlarmOn';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport PropTypes from 'prop-types';\r\nimport { DateTimePicker } from '@material-ui/pickers';\r\nimport { parseTimePoint, parseTimePeriod, sleep } from '../utils/utils'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  nested: {\r\n    paddingLeft: theme.spacing(4),\r\n  },\r\n}));\r\n\r\nfunction TimetableNodeList(props) {\r\n  const classes = useStyles();\r\n  const { node, onClose } = props;\r\n  const [selectedDate, handleDateChange] = React.useState(node.time_ ? node.time_ : new Date());\r\n  const [selectAvailableStartDate, handleAvailableStrartDateChange] = React.useState(node.available_start ? node.available_start : 0);\r\n  const [selectAvailableEndDate, handleAvailableEndDateChange] = React.useState(node.available_end ? node.available_end : 0);\r\n  const [selectAvailableStartDateOn, setSelectAvailableStartDateOn] = React.useState(selectAvailableStartDate === 0 ? false : true);\r\n  const [selectAvailableEndDateOn, setSelectAvailableEndDateOn] = React.useState(selectAvailableEndDate === 0 ? false : true);\r\n  const inputPrice = React.useRef();\r\n  const [valuePrice, setValuePrice] = React.useState(node.price);\r\n  return (\r\n    <List component=\"div\" disablePadding className={classes.nested}>\r\n      <ListItem>\r\n        <ListItemText primary=\"调整至\" />\r\n        <ListItemSecondaryAction>\r\n          <TextField label=\"输入价格\" ref={inputPrice} onChange={(e) => {\r\n            // console.log(getTextFieldValue(inputPrice));\r\n            console.log(e.target.value);\r\n            setValuePrice(e.target.value);\r\n          }} />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置时间\" />\r\n        <ListItemSecondaryAction>\r\n          <DateTimePicker value={selectedDate} onChange={handleDateChange} />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置生效开始时间\" />\r\n        <ListItemSecondaryAction>\r\n          {!selectAvailableStartDateOn ?\r\n            <Button onClick={() => { setSelectAvailableStartDateOn(true); }}>点击设置</Button>\r\n            : <DateTimePicker\r\n              value={selectAvailableStartDate}\r\n              onChange={handleAvailableStrartDateChange}\r\n              onClose={async () => {\r\n                await sleep(600);\r\n                selectAvailableStartDate === 0 ? setSelectAvailableStartDateOn(false) : setSelectAvailableStartDateOn(true);\r\n              }} />}\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置生效结束时间\" />\r\n        <ListItemSecondaryAction>\r\n          {!selectAvailableEndDateOn ?\r\n            <Button onClick={() => { setSelectAvailableEndDateOn(true); }}>点击设置</Button>\r\n            : <DateTimePicker\r\n              value={selectAvailableEndDate}\r\n              onChange={handleAvailableEndDateChange}\r\n              onClose={async () => {\r\n                await sleep(600);\r\n                selectAvailableEndDate === 0 ? setSelectAvailableEndDateOn(false) : setSelectAvailableEndDateOn(true);\r\n              }} />}\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <Button variant=\"contained\" fullWidth onClick={() => {\r\n          let n = node;\r\n          if (!selectedDate._d)\r\n            n.time_ = selectedDate.getTime();\r\n          else\r\n            n.time_ = selectedDate._d.getTime();\r\n          n.available_start = selectAvailableStartDate;\r\n          n.available_end = selectAvailableEndDate;\r\n          n.price = valuePrice;\r\n          if (onClose) {\r\n            onClose(n);\r\n          }\r\n        }}>保存</Button>\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}\r\n\r\nTimetableNodeList.propTypes = {\r\n  node: PropTypes.object,\r\n  onClose: PropTypes.func\r\n};\r\n\r\nexport default TimetableNodeList;","import React from 'react';\r\nimport { TextField, List, ListItem, ListItemText, ListItemIcon, ListItemSecondaryAction, IconButton, Button } from '@material-ui/core';\r\nimport { makeStyles, useTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport AlarmOnIcon from '@material-ui/icons/AlarmOn';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport PropTypes from 'prop-types';\r\nimport { DateTimePicker } from '@material-ui/pickers';\r\nimport { parseTimePoint, parseTimePeriod, sleep } from '../utils/utils';\r\nimport TimetableNodeList from '../components/timetableNodeList';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  nested: {\r\n    paddingLeft: theme.spacing(4),\r\n  },\r\n  secondaryIcon: {\r\n    // paddingRight: theme.spacing(4),\r\n  }\r\n}));\r\n\r\nfunction TimetableNode(props) {\r\n  const classes = useStyles();\r\n  const { node, onClose } = props;\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n  const getSecondaryText = () => {\r\n    return `${node.periodId}/调整至:${node.price}/下次调整:${parseTimePoint(node.time_)}/周期:${node.cycle > 0 ? parseTimePeriod(node.cycle) : \"单次\"}/${node.avaliable ? \"可用\" : \"不可用\"}`\r\n  };\r\n  return (\r\n    <div>\r\n      <ListItem button onClick={handleClick}>\r\n        <ListItemIcon><AlarmOnIcon /></ListItemIcon>\r\n        <ListItemText primary={node.itemName} secondary={getSecondaryText()} />\r\n        <div className={classes.secondaryIcon}>\r\n          {open ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n        </div>\r\n        <ListItemSecondaryAction>\r\n          <IconButton edge=\"end\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <TimetableNodeList node={node} onClose={node => {\r\n          console.log('onClose', node, onClose);\r\n          setOpen(false);\r\n          if (onClose) onClose();\r\n        }} />\r\n      </Collapse>\r\n    </div>\r\n  );\r\n}\r\n\r\nTimetableNode.propTypes = {\r\n  node: PropTypes.object.isRequired,\r\n  onClose: PropTypes.func\r\n};\r\n\r\nexport default TimetableNode;","import React from 'react';\r\nimport { TextField, List, ListItem, ListItemText, ListItemIcon, ListItemSecondaryAction, IconButton, Button } from '@material-ui/core';\r\nimport { makeStyles, useTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport AlarmOnIcon from '@material-ui/icons/AlarmOn';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport PropTypes from 'prop-types';\r\nimport { DateTimePicker } from '@material-ui/pickers';\r\nimport { parseTimePoint, parseTimePeriod, sleep } from '../utils/utils'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  nested: {\r\n    paddingLeft: theme.spacing(4),\r\n  },\r\n}));\r\n\r\nfunction TimetablePeriodList(props) {\r\n  const classes = useStyles();\r\n  const { period, onClose } = props;\r\n  const [selectedStartDate, handleDateStartChange] = React.useState(period.time_start ? period.time_start : new Date());\r\n  const [selectedEndDate, handleDateEndChange] = React.useState(period.time_end ? period.time_end : new Date());\r\n  const [selectAvailableStartDate, handleAvailableStrartDateChange] = React.useState(period.available_start ? period.available_start : 0);\r\n  const [selectAvailableEndDate, handleAvailableEndDateChange] = React.useState(period.available_end ? period.available_end : 0);\r\n  const [selectAvailableStartDateOn, setSelectAvailableStartDateOn] = React.useState(selectAvailableStartDate === 0 ? false : true);\r\n  const [selectAvailableEndDateOn, setSelectAvailableEndDateOn] = React.useState(selectAvailableEndDate === 0 ? false : true);\r\n  const inputPrice = React.useRef();\r\n  const [valuePrice, setValuePrice] = React.useState(period.price);\r\n  return (\r\n    <List component=\"div\" disablePadding className={classes.nested}>\r\n      <ListItem>\r\n        <ListItemText primary=\"调整至\" />\r\n        <ListItemSecondaryAction>\r\n          <TextField label=\"输入价格\" ref={inputPrice} onChange={(e) => {\r\n            // console.log(getTextFieldValue(inputPrice));\r\n            console.log(e.target.value);\r\n            setValuePrice(e.target.value);\r\n          }} />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置价格开始时间\" />\r\n        <ListItemSecondaryAction>\r\n          <DateTimePicker value={selectedStartDate} onChange={handleDateStartChange} />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置价格结束时间\" />\r\n        <ListItemSecondaryAction>\r\n          <DateTimePicker value={selectedEndDate} onChange={handleDateEndChange} />\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置生效开始时间\" />\r\n        <ListItemSecondaryAction>\r\n          {!selectAvailableStartDateOn ?\r\n            <Button onClick={() => { setSelectAvailableStartDateOn(true); }}>点击设置</Button>\r\n            : <DateTimePicker\r\n              value={selectAvailableStartDate}\r\n              onChange={handleAvailableStrartDateChange}\r\n              onClose={async () => {\r\n                await sleep(600);\r\n                selectAvailableStartDate === 0 ? setSelectAvailableStartDateOn(false) : setSelectAvailableStartDateOn(true);\r\n              }} />}\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <ListItemText primary=\"设置生效结束时间\" />\r\n        <ListItemSecondaryAction>\r\n          {!selectAvailableEndDateOn ?\r\n            <Button onClick={() => { setSelectAvailableEndDateOn(true); }}>点击设置</Button>\r\n            : <DateTimePicker\r\n              value={selectAvailableEndDate}\r\n              onChange={handleAvailableEndDateChange}\r\n              onClose={async () => {\r\n                await sleep(600);\r\n                selectAvailableEndDate === 0 ? setSelectAvailableEndDateOn(false) : setSelectAvailableEndDateOn(true);\r\n              }} />}\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <ListItem>\r\n        <Button variant=\"contained\" fullWidth onClick={() => {\r\n          let n = period;\r\n          n.time_ = valuePrice;\r\n          console.log('onClose', onClose);\r\n          if (onClose) {\r\n            onClose(n);\r\n          }\r\n        }}>保存</Button>\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}\r\n\r\nTimetablePeriodList.propTypes = {\r\n  period: PropTypes.object,\r\n  onClose: PropTypes.func\r\n};\r\n\r\nexport default TimetablePeriodList;","import React from 'react';\r\nimport { TextField, List, ListItem, ListItemText, ListItemIcon, ListItemSecondaryAction, IconButton, Button } from '@material-ui/core';\r\nimport { makeStyles, useTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport AlarmOnIcon from '@material-ui/icons/AlarmOn';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport PropTypes from 'prop-types';\r\nimport { parseTimePoint, parseTimePeriod, sleep } from '../utils/utils'\r\nimport TimetablePeriodList from './timetablePeriodList';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  nested: {\r\n    paddingLeft: theme.spacing(4),\r\n  },\r\n  secondaryIcon: {\r\n    // paddingRight: theme.spacing(4),\r\n  }\r\n}));\r\n\r\nfunction TimetablePeriod(props) {\r\n  const classes = useStyles();\r\n  const { period, onClose } = props;\r\n  const [open, setOpen] = React.useState(false);\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n  const getSecondaryText = () => {\r\n    return `${period.periodId}/调整至:${period.price}/下次调整:${parseTimePoint(period.time_start)}/下次调整结束:${parseTimePoint(period.time_end)}/周期:${period.cycle > 0 ? parseTimePeriod(period.cycle) : \"单次\"}/${period.avaliable ? \"可用\" : \"不可用\"}`\r\n  };\r\n  return (\r\n    <div>\r\n      <ListItem button onClick={handleClick}>\r\n        <ListItemIcon><AlarmOnIcon /></ListItemIcon>\r\n        <ListItemText primary={period.itemName} secondary={getSecondaryText()} />\r\n        <div className={classes.secondaryIcon}>\r\n          {open ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n        </div>\r\n        <ListItemSecondaryAction>\r\n          <IconButton edge=\"end\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <TimetablePeriodList period={period} onClose={period => {\r\n          console.log('onClose', period);\r\n          if (onClose) onClose();\r\n          setOpen(false);\r\n        }} />\r\n      </Collapse>\r\n    </div>\r\n  );\r\n}\r\n\r\nTimetablePeriod.propTypes = {\r\n  period: PropTypes.object.isRequired,\r\n  onClose: PropTypes.func\r\n};\r\n\r\nexport default TimetablePeriod;","import React from 'react'\r\nimport Container from '@material-ui/core/Container';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PropTypes from 'prop-types';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { setConfig } from \"../data/action\"\r\nimport TimetableNodeList from '../components/timetableNodeList';\r\nimport { DialogContent } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  content: {\r\n    marginTop: \"20%\",\r\n    marginBottom: \"20%\"\r\n  }\r\n}));\r\n\r\nfunction TimetableNodeAddDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, open, config } = props;\r\n\r\n  const handleClose = () => {\r\n    if (onClose)\r\n      onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open} fullWidth>\r\n      <DialogTitle>添加一个时间点</DialogTitle>\r\n      <Divider></Divider>\r\n      <DialogContent>\r\n        <TimetableNodeList config={config} onClose={n => {\r\n          console.log(n);\r\n          onClose();\r\n        }} node={{}} />\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nTimetableNodeAddDialog.propTypes = {\r\n  onClose: PropTypes.func,\r\n  open: PropTypes.bool.isRequired,\r\n  config: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default TimetableNodeAddDialog;","import React from 'react'\r\nimport Container from '@material-ui/core/Container';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport PropTypes from 'prop-types';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport { setConfig } from \"../data/action\"\r\nimport TimetablePeriodList from '../components/timetablePeriodList';\r\nimport { DialogContent } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  content: {\r\n    marginTop: \"20%\",\r\n    marginBottom: \"20%\"\r\n  }\r\n}));\r\n\r\nfunction TimetablePeriodAddDialog(props) {\r\n  const classes = useStyles();\r\n  const { onClose, open, config } = props;\r\n\r\n  const handleClose = () => {\r\n    if (onClose)\r\n      onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog onClose={handleClose} open={open} fullWidth>\r\n      <DialogTitle>添加一个时间段</DialogTitle>\r\n      <Divider></Divider>\r\n      <DialogContent>\r\n        <TimetablePeriodList config={config} onClose={n => {\r\n          console.log(n);\r\n          onClose();\r\n        }} period={{}} />\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nTimetablePeriodAddDialog.propTypes = {\r\n  onClose: PropTypes.func,\r\n  open: PropTypes.bool.isRequired,\r\n  config: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default TimetablePeriodAddDialog;","import React from \"react\"\r\nimport Container from '@material-ui/core/Container';\r\nimport { Button, Divider, List, ListSubheader, Typography } from \"@material-ui/core\";\r\nimport TimetableNode from \"../components/timetableNode\"\r\nimport TimetablePeriod from \"../components/timetablePeriod\"\r\nimport { API } from \"../api/api\"\r\nimport TimetableNodeAddDialog from \"./timetableNodeAddDialog\";\r\nimport TimetablePeriodAddDialog from \"./timetablePeriodAddDialog\";\r\nimport store from '../data/store'\r\nimport { setTimetablePeriods, setTimetableNodes } from \"../data/action\";\r\n\r\nfunction PlanTime(props) {\r\n  const [nodeAddOpen, setNodeAddOpen] = React.useState(false);\r\n  const [periodAddOpen, setPeriodAddOpen] = React.useState(false);\r\n  const { timetableNodes, timetablePeriods, config } = store.getState();\r\n  async function updateData() {\r\n    const api = new API();\r\n    await api.get_timetable_node().then(nodes => { store.dispatch(setTimetableNodes(nodes)); });\r\n    await api.get_timetable_period().then(periods => { store.dispatch(setTimetablePeriods(periods)); });\r\n  }\r\n  return (<Container>\r\n    <List subheader={<ListSubheader component=\"div\">\r\n      按时间点管理\r\n      <Button style={{ float: 'right' }} color=\"primary\" variant=\"contained\" onClick={async () => {\r\n        setNodeAddOpen(true);\r\n      }}>增加</Button>\r\n    </ListSubheader>}>\r\n      {timetableNodes.map(node => <TimetableNode key={key_count++} node={node} />)}\r\n    </List>\r\n    <List subheader={<ListSubheader component=\"div\">\r\n      按时间段管理\r\n      <Button style={{ float: 'right' }} color=\"primary\" variant=\"contained\" onClick={async () => {\r\n        setPeriodAddOpen(true);\r\n      }}>增加</Button>\r\n    </ListSubheader>}>\r\n      {timetablePeriods.map(period => <TimetablePeriod key={key_count++} period={period} />)}\r\n    </List>\r\n    <TimetableNodeAddDialog config={config} open={nodeAddOpen} onClose={() => {\r\n      setNodeAddOpen(false);\r\n      updateData();\r\n    }} />\r\n    <TimetablePeriodAddDialog config={config} open={periodAddOpen} onClose={() => {\r\n      setPeriodAddOpen(false);\r\n      updateData();\r\n    }} />\r\n  </Container >);\r\n}\r\n\r\nexport default PlanTime;","import React from \"react\"\r\nimport Container from '@material-ui/core/Container';\r\n\r\nclass PlanStock extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.render = this.render.bind(this);\r\n  }\r\n  render() {\r\n    let { config } = this.props;\r\n    return (<Container size=\"xs\">\r\n      库存设置\r\n    </Container>)\r\n  }\r\n};\r\n\r\nexport default PlanStock;","import React from \"react\"\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport LinkText from '@material-ui/core/Link';\r\nimport { ListItem, ListItemText, List } from '@material-ui/core';\r\nimport Button from '@material-ui/core/Button';\r\nimport { API, test } from \"../api/api\"\r\nconst QRCode = require('qrcode.react');\r\n\r\nclass Connect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.render = this.render.bind(this);\r\n    this.api = new API();\r\n    this.state = {\r\n      qrcodeWidth: window.innerWidth * 0.5 < 250 ? window.innerWidth * 0.5 : 250,\r\n      ips: [],\r\n      url: window.location.protocol + \"//\" + window.location.hostname + \":\" + window.location.port + '/',\r\n    };\r\n    window.addEventListener(\"resize\", () => { this.setState({ qrcodeWidth: window.innerWidth * 0.5 < 250 ? window.innerWidth * 0.5 : 250 }); })\r\n    this.api.get_ips().then(ips => {\r\n      console.log('ips', ips);\r\n      this.setState({ ips: ips });\r\n      if (ips.length > 0) this.setState({ url: window.location.protocol + \"//\" + ips[0] + \":\" + window.location.port + '/' });\r\n    })\r\n  }\r\n  render() {\r\n    let { config } = this.props;\r\n    return (<Container size=\"xs\">\r\n      <Typography variant=\"body1\">请在下面选择一个可能的IP地址，然后扫码连接。</Typography>\r\n      <List>\r\n        {this.state.ips.map(ip =>\r\n          <ListItem button key={ip} onClick={() => {\r\n            this.setState({ url: window.location.protocol + \"//\" + ip + \":\" + window.location.port + '/' });\r\n          }}>\r\n            <ListItemText primary={ip} />\r\n          </ListItem>\r\n        )}\r\n      </List>\r\n      <QRCode value={this.state.url} size={this.state.qrcodeWidth} />\r\n      <Typography variant=\"body1\">或者打开：<LinkText href={this.state.url}>{this.state.url}</LinkText></Typography>\r\n    </Container >)\r\n  }\r\n};\r\n\r\nexport default Connect;","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport Container from '@material-ui/core/Container';\r\nimport { makeStyles, useTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport AlarmIcon from '@material-ui/icons/Alarm';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport StorageIcon from '@material-ui/icons/Storage';\r\nimport VerifiedUserIcon from '@material-ui/icons/VerifiedUser';\r\nimport PhonelinkIcon from '@material-ui/icons/Phonelink';\r\nimport {\r\n  // HashRouter as Router,\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route\r\n} from \"react-router-dom\";\r\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\r\nimport { Provider } from 'react-redux'\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport MomentUtils from '@date-io/moment';\r\nimport moment from 'moment';\r\nimport 'moment/locale/zh-cn'\r\nimport store from './data/store'\r\nimport { setConfig, setReserveTableData, setRoomStockData, setShopInfo } from \"./data/action\";\r\n\r\nimport { isMobileDevice, sleep } from \"./utils/utils\"\r\nimport { API } from \"./api/api\"\r\n\r\nimport ListItemLink from \"./components/listItemLink\"\r\nimport LoginDialog from \"./pages/loginDialog\"\r\nimport Launch from \"./pages/launch\"\r\nimport Settings from \"./pages/settings\"\r\nimport Verify from \"./pages/verify\"\r\nimport PlanTime from \"./pages/planTime\"\r\nimport PlanStock from \"./pages/planStock\"\r\nimport Connect from \"./pages/connect\"\r\n\r\nimport './App.css';\r\n\r\nconst drawerWidth = 240;\r\nmoment.locale('zh-cn');\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    width: '100%',\r\n    // overflowX: 'auto',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  title: {\r\n    flexGrow: 1\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerClose: {\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n    width: theme.spacing(7) + 1,\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n    width: '100%',\r\n    overflowX: 'auto',\r\n  },\r\n}));\r\n\r\nconst api = new API();\r\napi.get_shop_info().then(shopInfo => {\r\n  console.log('shopInfo', shopInfo);\r\n  store.dispatch(setShopInfo(shopInfo));\r\n})\r\n\r\n// store.subscribe(() => {\r\n//   console.log('redux update to', store.getState());\r\n// });\r\n\r\nexport default function App() {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n  const [open, setOpen] = React.useState(false);\r\n  const [popupLogin, setPopupLogin] = React.useState(false);\r\n\r\n  // 拉大到800会打开，拉小到600关闭\r\n  const triggerWidthOpen = 800;\r\n  const triggerWidthClose = 600;\r\n\r\n  // onMount & onUpdate\r\n  React.useEffect(() => {\r\n    const onWindowResize = () => {\r\n      let width = window.innerWidth;\r\n      // console.log(width);\r\n      if (!open && width >= triggerWidthOpen) setOpen(true);\r\n      if (open && width <= triggerWidthClose) setOpen(false);\r\n    };\r\n    window.addEventListener(\"load\", onWindowResize);\r\n    window.addEventListener('resize', onWindowResize);\r\n\r\n    return () => {\r\n      window.removeEventListener(\"load\", onWindowResize);\r\n      window.removeEventListener(\"resize\", onWindowResize);\r\n    };\r\n  });\r\n\r\n  // console.log(\"store\", store);\r\n  // console.log(\"store.getState()\", store.getState());\r\n\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleLoginOpen = () => {\r\n    // console.log('handleLoginOpen');\r\n    setPopupLogin(true);\r\n  };\r\n\r\n  const handleLoginClose = () => {\r\n    setPopupLogin(false);\r\n  };\r\n\r\n  const handleClickAction = () => {\r\n    if (window.innerWidth < 600 || window.location.pathname === '/') {\r\n      setOpen(false);\r\n    }\r\n\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <ThemeProvider theme={store.getState().config.theme}>\r\n        <Router>\r\n          <MuiPickersUtilsProvider utils={MomentUtils} locale=\"zh-cn\">\r\n            <CssBaseline />\r\n            <AppBar\r\n              position=\"fixed\"\r\n              className={clsx(classes.appBar, {\r\n                [classes.appBarShift]: open,\r\n              })}\r\n            >\r\n              <Toolbar>\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"open drawer\"\r\n                  onClick={handleDrawerOpen}\r\n                  edge=\"start\"\r\n                  className={clsx(classes.menuButton, {\r\n                    [classes.hide]: open,\r\n                  })}\r\n                >\r\n                  <MenuIcon />\r\n                </IconButton>\r\n                <Typography variant=\"h6\" noWrap className={classes.title}>\r\n                  团购杀手 - KTV体验版\r\n                </Typography>\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  aria-label=\"login\"\r\n                  onClick={handleLoginOpen}\r\n                >\r\n                  <AccountCircleIcon />\r\n                </IconButton>\r\n              </Toolbar>\r\n            </AppBar>\r\n            <Drawer\r\n              variant=\"permanent\"\r\n              className={clsx(classes.drawer, {\r\n                [classes.drawerOpen]: open,\r\n                [classes.drawerClose]: !open,\r\n              })}\r\n              classes={{\r\n                paper: clsx({\r\n                  [classes.drawerOpen]: open,\r\n                  [classes.drawerClose]: !open,\r\n                }),\r\n              }}\r\n            >\r\n              <div className={classes.toolbar}>\r\n                <IconButton onClick={handleDrawerClose}>\r\n                  {theme.direction === 'rtl' ? <ChevronRightIcon /> : <ChevronLeftIcon />}\r\n                </IconButton>\r\n              </div>\r\n              <Divider />\r\n              <List onClick={handleClickAction}>\r\n                <ListItemLink to=\"/\" primary=\"启动页\" icon={<DashboardIcon />} />\r\n                <ListItemLink to=\"/plan/time\" primary=\"时间计划\" icon={<AlarmIcon />} />\r\n                <ListItemLink to=\"/plan/stock\" primary=\"库存计划\" icon={<StorageIcon />} />\r\n                <ListItemLink to=\"/settings\" primary=\"设置\" icon={<SettingsIcon />} />\r\n                <ListItemLink to=\"/verify\" primary=\"授权\" icon={<VerifiedUserIcon />} />\r\n                {isMobileDevice() ? null : <ListItemLink to=\"/connect\" primary=\"移动设备\" icon={<PhonelinkIcon />} />}\r\n              </List>\r\n            </Drawer>\r\n            <main className={classes.content}>\r\n              <div className={classes.toolbar} />\r\n              {/* <Route render={({ location }) => {\r\n                  console.log('location', location);\r\n                  return (\r\n                    <TransitionGroup>\r\n                      <CSSTransition\r\n                        key={location.key}\r\n                        classNames='fade2'\r\n                        timeout={0}\r\n                      >\r\n                        <Switch>\r\n                          <Route path={\"/\"} exact={true}>\r\n                            <Launch config={store.getState().config} />\r\n                          </Route>\r\n                          <Route path={\"/plan/time\"} exact={false}>\r\n                            <PlanTime config={store.getState().config} />\r\n                          </Route>\r\n                          <Route path={\"/plan/stock\"} exact={false}>\r\n                            <PlanStock config={store.getState().config} />\r\n                          </Route>\r\n                          <Route path={\"/settings\"} exact={false}>\r\n                            <Settings config={store.getState().config} />\r\n                          </Route>\r\n                          <Route path={\"/verify\"} exact={false}>\r\n                            <Verify config={store.getState().config} />\r\n                          </Route>\r\n                          <Route path={\"/connect\"} exact={false}>\r\n                            <Connect config={store.getState().config} />\r\n                          </Route>\r\n                        </Switch>\r\n                      </CSSTransition>\r\n                    </TransitionGroup>\r\n                  );\r\n                }}>\r\n                </Route> */}\r\n              {/* {'' + store.getState().shopInfo} */}\r\n              <Switch>\r\n                <Route path={\"/\"} exact={true}>\r\n                  <Launch config={store.getState().config} />\r\n                </Route>\r\n                <Route path={\"/plan/time\"} exact={false}>\r\n                  <PlanTime config={store.getState().config} />\r\n                </Route>\r\n                <Route path={\"/plan/stock\"} exact={false}>\r\n                  <PlanStock config={store.getState().config} />\r\n                </Route>\r\n                <Route path={\"/settings\"} exact={false}>\r\n                  <Settings config={store.getState().config} />\r\n                </Route>\r\n                <Route path={\"/verify\"} exact={false}>\r\n                  <Verify config={store.getState().config} />\r\n                </Route>\r\n                <Route path={\"/connect\"} exact={false}>\r\n                  <Connect config={store.getState().config} />\r\n                </Route>\r\n              </Switch>\r\n            </main>\r\n          </MuiPickersUtilsProvider>\r\n        </Router>\r\n        <LoginDialog config={store.getState().config} open={popupLogin && store.getState().config.has_login} onClose={handleLoginClose}></LoginDialog>\r\n      </ThemeProvider>\r\n    </div>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport store from './data/store';\r\nimport { Provider } from 'react-redux';\r\nimport { API } from './api/api';\r\nimport { setTimetableNodes, setTimetablePeriods } from './data/action';\r\nimport { sleep } from './utils/utils';\r\n\r\n// 循环执行函数\r\nasync function cycleFunc(cycle = 1000) {\r\n  const api = new API();\r\n  while (true) {\r\n    await api.get_timetable_node().then(nodes => { store.dispatch(setTimetableNodes(nodes)); });\r\n    await api.get_timetable_period().then(periods => { store.dispatch(setTimetablePeriods(periods)); });\r\n    await sleep(cycle);\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  // <React.StrictMode>\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  // </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\ncycleFunc();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}