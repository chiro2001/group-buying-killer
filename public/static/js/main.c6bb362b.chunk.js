(this["webpackJsonpmagic-mouse"]=this["webpackJsonpmagic-mouse"]||[]).push([[0],{112:function(t,e,n){},131:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(8),s=n.n(r),c=(n(112),n(68)),o=n(54),d=n(31),l=n(4),u=n(168),j=n(40),h=n(174),b=n(179),f=n(176),O=n(177),p=n(173),g=n(175),x=n(48),m=n(171),v=n(178),w=n(88),_=n.n(w),y=n(91),k=n.n(y),S=n(90),C=n.n(S),N=n(89),E=n.n(N),I=n(92),T=n.n(I),z=n(93),q=n.n(z),W=n(95),B=n.n(W),M=n(94),P=n.n(M),A=n(96),G=n.n(A),L=n(97),F=n.n(L),J=n(57),R=n(10),D=n(98),V=n(38),H=n(82),K=n(15),U=n(16),X=n(99),Q=n(162),Y=n(61),Z={config:new(function(){function t(){Object(K.a)(this,t),this.ITEM_NAME="group_bying_config",this.load=this.load.bind(this),this.save=this.save.bind(this),this.theme_avaliable={default:Object(X.a)({}),dark:Object(X.a)({palette:{type:"dark",primary:{main:Q.a[500]},secondary:{main:Y.a[500]}}})},this.data_default={debug:!0,version_frontend:.1,theme_name:"dark",theme_avaliable:["default","dark"]},this.data=this.data_default,this.theme=this.theme_avaliable.default,this.load()}return Object(U.a)(t,[{key:"load",value:function(){console.log("Config: loading config..."),this.data.debug&&(console.log("Config: load default config."),this.save());try{if(this.data=JSON.parse(localStorage.getItem(this.ITEM_NAME)),!this.data)throw new Error("Null data");if(console.log("Got data:",this.data),!this.data.version_frontend||this.data.version_frontend<this.data_default.version_frontend){for(var t in console.log("Config: update ".concat(this.data.version_frontend," -> ").concat(this.data_default.version_frontend)),this.data.version_frontend=this.data_default.version_frontend,this.data_default)this.data[t]||(console.log("    Config: add value ".concat(t)),this.data[t]=this.data_default[t]);this.save()}}catch(e){console.warn("Can not find ".concat(this.ITEM_NAME," in localStorage, use default config.")),this.data=this.data_default,this.save()}this.theme=this.theme_avaliable[this.data.theme_name],this.theme||(this.theme=this.theme_avaliable.default)}},{key:"save",value:function(){console.log("Config: saving config..."),localStorage.setItem(this.ITEM_NAME,JSON.stringify(this.data))}}]),t}())};var $=Object(V.c)({config:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.config,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CONFIG":return e.data;default:return t}}}),tt=Object(V.d)($,Object(V.a)(H.a));function et(){var t=navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1||t.indexOf("iPod")>-1||t.indexOf("Symbian")>-1}function nt(t,e,n){if(null==t)return"";var a="",i=typeof t;if("string"===i||"number"===i||"boolean"===i)a+="&"+e+"="+(null==n||n?encodeURIComponent(t):t);else for(var r in t){var s=null==e?r:e+(t instanceof Array?"["+r+"]":"."+r);a+=nt(t[r],s,n)}return a}var at=n(163),it=n(165),rt=n(166),st=n(2);var ct=function(t){var e=t.icon,n=t.primary,a=t.to,r=i.a.useMemo((function(){return i.a.forwardRef((function(t,e){return Object(st.jsx)(J.b,Object(o.a)({to:a,ref:e},t))}))}),[a]);return Object(st.jsx)("li",{children:Object(st.jsxs)(at.a,{button:!0,component:r,children:[e?Object(st.jsx)(it.a,{children:e}):null,Object(st.jsx)(rt.a,{primary:n})]})})},ot=n(167),dt=n(170),lt=n(169),ut=n(18),jt=n(20),ht=n(19);var bt=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a}return Object(U.a)(n,[{key:"render",value:function(){this.props.config;return Object(st.jsx)(ot.a,{size:"sm",children:Object(st.jsx)(x.a,{variant:"body1",children:"\u8bf7\u5728\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\u5b8c\u6210\u767b\u5f55"})})}}]),n}(i.a.Component),ft=Object(u.a)((function(t){return{content:{marginTop:"20%",marginBottom:"20%"}}}));var Ot=function(t){var e=ft(),n=t.onClose,a=t.selectedValue,i=t.open,r=t.config;return Object(st.jsxs)(lt.a,{onClose:function(){n(a)},open:i,children:[Object(st.jsx)(dt.a,{children:"\u8d26\u6237\u767b\u5f55"}),Object(st.jsx)(m.a,{}),Object(st.jsx)(ot.a,{size:"sm",className:e.content,children:Object(st.jsx)(bt,{config:r})})]})},pt=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a}return Object(U.a)(n,[{key:"render",value:function(){this.props.config;return Object(st.jsx)(ot.a,{size:"xs",children:"\u542f\u52a8\u9875"})}}]),n}(i.a.Component),gt=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a}return Object(U.a)(n,[{key:"render",value:function(){this.props.config;return Object(st.jsx)(ot.a,{size:"xs",children:"\u8bbe\u7f6e"})}}]),n}(i.a.Component),xt=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a}return Object(U.a)(n,[{key:"render",value:function(){this.props.config;return Object(st.jsx)(ot.a,{size:"xs",children:"\u6388\u6743\u9875\u9762"})}}]),n}(i.a.Component),mt=n(172),vt=n(87),wt=n.n(vt);var _t=function(t){var e=t.node;return Object(st.jsxs)(at.a,{button:!0,children:[Object(st.jsx)(it.a,{children:Object(st.jsx)(wt.a,{})}),Object(st.jsx)(rt.a,{primary:e.itemName})]})},yt=n(29),kt=n.n(yt),St=n(43),Ct=function(){function t(e){Object(K.a)(this,t),this.url_base="/api/v1/",this.url={test:"test",get_ips:"get/ips",get_timetable_node:"get/timetable_node",add_timetable_node:"add/timetable_node"},this.request=this.request.bind(this),this.test=this.test.bind(this),this.get_ips=this.get_ips.bind(this)}return Object(U.a)(t,[{key:"request",value:function(){var t=Object(St.a)(kt.a.mark((function t(e,n){var a,i,r=arguments;return kt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>2&&void 0!==r[2]?r[2]:"GET",i={},"GET"!==a){t.next=10;break}return t.next=5,fetch(this.url_base+e+(n?"?":"")+nt(n),{method:"GET",credentials:"include",mode:"cors"});case 5:return t.next=7,t.sent.json();case 7:i=t.sent,t.next=15;break;case 10:return t.next=12,fetch(this.url_base+e,{body:JSON.stringify(n),method:"POST",credentials:"include",mode:"cors",headers:{"content-type":"application/json"}});case 12:return t.next=14,t.sent.json();case 14:i=t.sent;case 15:return 200!==i.code&&console.warn("Request responsed with code",i.code,"message:",i.message,"data:",i.data),console.log("resp",i),t.abrupt("return",i);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"test",value:function(){var t=Object(St.a)(kt.a.mark((function t(){return kt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request(this.url.test);case 2:return t.abrupt("return",t.sent.data.test);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"get_ips",value:function(){var t=Object(St.a)(kt.a.mark((function t(){return kt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request(this.url.get_ips);case 2:return t.abrupt("return",t.sent.data.ips);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"get_timetable_node",value:function(){var t=Object(St.a)(kt.a.mark((function t(){return kt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request(this.url.get_timetable_node);case 2:return t.abrupt("return",t.sent.data.timetable_node);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"add_timetable_node",value:function(){var t=Object(St.a)(kt.a.mark((function t(e){return kt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.request(this.url.add_timetable_node,e,"POST");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),Nt=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a.api=new Ct,a.state={timetableNodes:[]},a.api.get_timetable_node().then((function(t){a.setState({timetableNodes:t})})),a}return Object(U.a)(n,[{key:"render",value:function(){var t=this;this.props.config;return Object(st.jsxs)(ot.a,{size:"xs",children:[Object(st.jsx)(mt.a,{onClick:function(){t.api.add_timetable_node({roomItem:{itemId:0,price:0,foodDesc:0,singHours:0,stock:0,itemType:0,periodType:0},periodId:0,itemName:0,price:0,time_:(new Date).getTime()+1e3,cycle:0})},children:"\u589e\u52a0"}),Object(st.jsx)(x.a,{variant:"h6",children:"\u5df2\u8ba1\u5212"}),Object(st.jsx)(m.a,{}),Object(st.jsx)(p.a,{children:this.state.timetableNodes.map((function(t){return Object(st.jsx)(_t,{node:t})}))})]})}}]),n}(i.a.Component),Et=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a}return Object(U.a)(n,[{key:"render",value:function(){this.props.config;return Object(st.jsx)(ot.a,{size:"xs",children:"\u5e93\u5b58\u8bbe\u7f6e"})}}]),n}(i.a.Component),It=n(125),Tt=function(t){Object(jt.a)(n,t);var e=Object(ht.a)(n);function n(t){var a;return Object(K.a)(this,n),(a=e.call(this,t)).render=a.render.bind(Object(ut.a)(a)),a.api=new Ct,a.state={qrcodeWidth:.5*window.innerWidth<250?.5*window.innerWidth:250,ips:[],url:window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/"},window.addEventListener("resize",(function(){a.setState({qrcodeWidth:.5*window.innerWidth<250?.5*window.innerWidth:250})})),a.api.get_ips().then((function(t){console.log("ips",t),a.setState({ips:t}),t.length>0&&a.setState({url:window.location.protocol+"//"+t[0]+":"+window.location.port+"/"})})),a}return Object(U.a)(n,[{key:"render",value:function(){var t=this;this.props.config;return Object(st.jsxs)(ot.a,{size:"xs",children:[Object(st.jsx)(x.a,{variant:"body1",children:"\u8bf7\u5728\u4e0b\u9762\u9009\u62e9\u4e00\u4e2a\u53ef\u80fd\u7684IP\u5730\u5740\uff0c\u7136\u540e\u626b\u7801\u8fde\u63a5\u3002"}),Object(st.jsx)(p.a,{children:this.state.ips.map((function(e){return Object(st.jsx)(at.a,{button:!0,onClick:function(){t.setState({url:window.location.protocol+"//"+e+":"+window.location.port+"/"})},children:Object(st.jsx)(rt.a,{primary:e})},e)}))}),Object(st.jsx)(It,{value:this.state.url,size:this.state.qrcodeWidth}),Object(st.jsxs)(x.a,{variant:"body1",children:["\u6216\u8005\u6253\u5f00\uff1a",Object(st.jsx)("a",{href:this.state.url,children:this.state.url})]})]})}}]),n}(i.a.Component),zt=240,qt=Object(u.a)((function(t){return{root:{display:"flex"},appBar:{zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},title:{flexGrow:1},appBarShift:{marginLeft:zt,width:"calc(100% - ".concat(zt,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:zt,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:zt,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})},drawerClose:Object(d.a)({transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),overflowX:"hidden",width:t.spacing(7)+1},t.breakpoints.up("sm"),{width:t.spacing(9)}),toolbar:Object(o.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:t.spacing(0,1)},t.mixins.toolbar),content:{flexGrow:1,padding:t.spacing(3)}}}));function Wt(){var t,e,n=qt(),a=Object(j.a)(),r=i.a.useState(!1),s=Object(c.a)(r,2),o=s[0],u=s[1],w=i.a.useState(!1),y=Object(c.a)(w,2),S=y[0],N=y[1];i.a.useEffect((function(){var t=function(){var t=window.innerWidth;!o&&t>=800&&u(!0),o&&t<=600&&u(!1)};window.addEventListener("load",t),window.addEventListener("resize",t)}));return Object(st.jsx)("div",{className:n.root,children:Object(st.jsx)(D.a,{store:tt,children:Object(st.jsxs)(h.a,{theme:tt.getState().config.theme,children:[Object(st.jsxs)(J.a,{children:[Object(st.jsx)(g.a,{}),Object(st.jsx)(f.a,{position:"fixed",className:Object(l.a)(n.appBar,Object(d.a)({},n.appBarShift,o)),children:Object(st.jsxs)(O.a,{children:[Object(st.jsx)(v.a,{color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},edge:"start",className:Object(l.a)(n.menuButton,Object(d.a)({},n.hide,o)),children:Object(st.jsx)(_.a,{})}),Object(st.jsx)(x.a,{variant:"h6",noWrap:!0,className:n.title,children:"\u56e2\u8d2d\u6740\u624b - KTV\u4f53\u9a8c\u7248"}),Object(st.jsx)(v.a,{color:"inherit","aria-label":"login",onClick:function(){N(!0)},children:Object(st.jsx)(E.a,{})})]})}),Object(st.jsxs)(b.a,{variant:"permanent",className:Object(l.a)(n.drawer,(t={},Object(d.a)(t,n.drawerOpen,o),Object(d.a)(t,n.drawerClose,!o),t)),classes:{paper:Object(l.a)((e={},Object(d.a)(e,n.drawerOpen,o),Object(d.a)(e,n.drawerClose,!o),e))},children:[Object(st.jsx)("div",{className:n.toolbar,children:Object(st.jsx)(v.a,{onClick:function(){u(!1)},children:"rtl"===a.direction?Object(st.jsx)(C.a,{}):Object(st.jsx)(k.a,{})})}),Object(st.jsx)(m.a,{}),Object(st.jsxs)(p.a,{onClick:function(){window.innerWidth<600&&u(!1)},children:[Object(st.jsx)(ct,{to:"/",primary:"\u542f\u52a8\u9875",icon:Object(st.jsx)(T.a,{})}),Object(st.jsx)(ct,{to:"/plan/time",primary:"\u65f6\u95f4\u8ba1\u5212",icon:Object(st.jsx)(q.a,{})}),Object(st.jsx)(ct,{to:"/plan/stock",primary:"\u5e93\u5b58\u8ba1\u5212",icon:Object(st.jsx)(P.a,{})}),Object(st.jsx)(ct,{to:"/settings",primary:"\u8bbe\u7f6e",icon:Object(st.jsx)(B.a,{})}),Object(st.jsx)(ct,{to:"/verify",primary:"\u6388\u6743",icon:Object(st.jsx)(G.a,{})}),et()?null:Object(st.jsx)(ct,{to:"/connect",primary:"\u79fb\u52a8\u8bbe\u5907",icon:Object(st.jsx)(F.a,{})})]})]}),Object(st.jsxs)("main",{className:n.content,children:[Object(st.jsx)("div",{className:n.toolbar}),Object(st.jsxs)(R.c,{children:[Object(st.jsx)(R.a,{path:"/",exact:!0,children:Object(st.jsx)(pt,{config:tt.getState().config})}),Object(st.jsx)(R.a,{path:"/plan/time",exact:!1,children:Object(st.jsx)(Nt,{config:tt.getState().config})}),Object(st.jsx)(R.a,{path:"/plan/stock",exact:!1,children:Object(st.jsx)(Et,{config:tt.getState().config})}),Object(st.jsx)(R.a,{path:"/settings",exact:!1,children:Object(st.jsx)(gt,{config:tt.getState().config})}),Object(st.jsx)(R.a,{path:"/verify",exact:!1,children:Object(st.jsx)(xt,{config:tt.getState().config})}),Object(st.jsx)(R.a,{path:"/connect",exact:!1,children:Object(st.jsx)(Tt,{config:tt.getState().config})})]})]})]}),Object(st.jsx)(Ot,{config:tt.getState().config,open:S,onClose:function(){N(!1)}})]})})})}var Bt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),a(t),i(t),r(t),s(t)}))};s.a.render(Object(st.jsx)(Wt,{}),document.getElementById("root")),Bt()}},[[131,1,2]]]);
//# sourceMappingURL=main.c6bb362b.chunk.js.map